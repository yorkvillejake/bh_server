(this.webpackJsonpapp_client=this.webpackJsonpapp_client||[]).push([[0],{132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},237:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/logo.1058a708.gif"},238:function(e,t,a){"use strict";a.r(t);var s=a(29),n=a(1),c=a.n(n),i=a(25),r=a.n(i),l=a(23),o=a(22),d=(a(131),a(132),a(133),a(134),a(135),a(136),a(137),a(138),a(10)),h=a(11),j=a(13),u=a(12),m=a(9),b=a.n(m),f=a(255),O=a(244),x=a(68),_=a(252),g=a(251),p=a(82),v=a(243),y=a(123),C=a(64),k=a.n(C),w=a(67),N=a.n(w),S=a(95),M=a.n(S);function D(e){var t=localStorage.getItem(e);if(!t)return null;var a=JSON.parse(t);return(new Date).getTime()>a.expiry?(localStorage.removeItem(e),null):a.value}function Y(e,t,a){var s={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(s))}function I(e){var t=new Date(e),a=t.getDay(),s=t.getDate()-a+(0==a?-6:1);return t.setDate(s),t.setHours(0,0,0),t}function B(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a}function A(e){var t=e.split(":");return 60*t[0]+1*t[1]}function T(e){return Math.floor(e/60)+":"+("00"+e%60).slice(-2)}function F(e,t){for(var a=[],s=0;s<t;s++)a.push(e);return a}function G(e,t,a,s){if(0===e.length)return 0;for(var n=0,c=e.length;n<c-1;){var i=Math.floor((n+c)/2);s(a,e[i][t])>0?n=i:c=i}return s(e[n][t],a)>=0?n:c}var L=a(47),E=a.n(L),P="http://35.225.204.136",R={base_url:P,login:P+"/api/login",logout:P+"/api/logout",student_add:P+"/api/student/add",student_get:P+"/api/student/get",student_edit:P+"/api/student/edit",student_remove:P+"/api/student/remove",student_getall:P+"/api/student/getall",staff_getall:P+"/api/staff/getall",staff_get:P+"/api/staff/get",staff_add:P+"/api/staff/add",staff_edit:P+"/api/staff/edit",staff_remove:P+"/api/staff/remove",class_getall:P+"/api/class/getall",class_get:P+"/api/class/get",class_add:P+"/api/class/add",class_edit:P+"/api/class/edit",class_remove:P+"/api/class/remove",schedule_gettoday:P+"/api/schedule/gettoday",schedule_getall:P+"/api/schedule/getall",schedule_getbyclass:P+"/api/schedule/getbyclass",schedule_getbyinterval:P+"/api/schedule/getbyinterval",schedule_getbydate:P+"/api/schedule/getbydate",schedule_getbystaff:P+"/api/schedule/getbystaff",schedule_get:P+"/api/schedule/get",schedule_add:P+"/api/schedule/add",schedule_edit:P+"/api/schedule/edit",schedule_remove:P+"/api/schedule/remove",belt_getall:P+"/api/belt/getall",beltgroup_getall:P+"/api/beltgroup/getall",room_getall:P+"/api/room/getall",location_getall:P+"/api/location/getall",check_student_add:P+"/api/check/student/add",check_staff_add:P+"/api/check/staff/add",check_staff_get:P+"/api/check/staff/get",check_student_get:P+"/api/check/student/get"};function H(e,t,a){return a=a||{headers:{"Content-Type":"application/json"}},new Promise((function(s,n){E.a.post(e,t,a).then((function(e){s(e)})).catch((function(e){n(e)}))}))}function V(e,t,a){a=a||{headers:{"Content-Type":"multipart/form-data"}};var s=new FormData;for(var n in t)s.append(n,t[n]);return new Promise((function(t,n){E.a.post(e,s,a).then((function(e){t(e)})).catch((function(e){n(e)}))}))}var z=a(0),q=[{dataField:"avatar",text:"",headerStyle:{width:56},searchable:!1,formatter:function(e,t,a,s){return Object(z.jsx)("img",{src:R.base_url+t.avatar,alt:"",className:"student_avatar_in_table"})}},{dataField:"firstname",text:"Name",sort:!0,formatter:function(e,t,a,s){return Object(z.jsxs)("a",{href:"/admin/students/edit?id="+t._id,children:[t.firstname," ",t.lastname]})}},{dataField:"belts",text:"Belt",searchable:!1},{dataField:"class_names",text:"Classes",searchable:!1}],W=N()({page:1,alwaysShowAllBtns:!0,showTotal:!0,withFirstAndLast:!0}),U=S.Search.SearchBar,J=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).onAddClick=function(){s.props.history.push("/admin/students/add")},s.state={list:[],token_info:D("token_info"),include_inactive:!1},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;H(R.student_getall,{token:this.state.token_info}).then((function(t){t.data.success?e.setState({list:t.data.result}):console.log(t.data.message)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.list;return this.state.include_inactive||(t=t.filter((function(e){return e.is_active}))),Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(M.a,{keyField:"_id",data:t,columns:q,search:!0,children:function(t){return Object(z.jsxs)("div",{className:"py-4",children:[Object(z.jsx)("div",{id:"datatable-basic_filter",className:"dataTables_filter px-4 pb-1 ",children:Object(z.jsxs)(v.a,{children:[Object(z.jsxs)(y.a,{sm:5,xs:12,className:"horizontal-centering-container mb-2",children:[Object(z.jsx)("label",{children:"Name starts with:\xa0\xa0"}),Object(z.jsx)(U,Object(s.a)({className:"form-control-sm",placeholder:""},t.searchProps))]}),Object(z.jsxs)(y.a,{sm:4,xs:12,className:"horizontal-centering-container mb-2",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2",checked:e.state.include_inactive,onChange:function(t){return e.setState({include_inactive:t.target.checked})}}),Object(z.jsx)("label",{children:"\xa0Include inactive"})]}),Object(z.jsx)(y.a,{sm:3,xs:12,className:"horizontal-centering-container mb-2",children:Object(z.jsx)(x.a,{onClick:e.onAddClick,variant:"secondary",style:{marginLeft:"auto",marginRight:0},children:"Add a student"})})]})}),Object(z.jsx)(k.a,Object(s.a)(Object(s.a)({},t.baseProps),{},{bootstrap4:!0,pagination:W,bordered:!1}))]})}})})}}]),a}(n.Component),K=a(14),Q=a(37),X=a(5),Z=a.n(X),$=a(250),ee=a(256),te=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.onCloseClick=function(){s.props.history.goBack()},s.saveCurrent=function(e){V(R.student_add,{firstname:s.state.firstname,lastname:s.state.lastname,birthday:s.state.birthday,date_started:s.state.started,date_end:s.state.endDate,is_active:s.state.is_active,avatar:s.state.avatar,notes:s.state.notes,levels:s.state.levels,contact_person:s.state.contact_person,contact_email:s.state.contact_email,contact_phone:s.state.contact_phone,is_trial:s.state.is_trial,trial_start:s.state.trial_start,trial_end:s.state.trial_end,trial_num_classes:s.state.trial_num_classes,token:s.state.token_info}).then((function(t){t.data.success?e?s.props.history.replace(e):s.props.history.goBack():s.showMessage(t.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to save")}))},s.onSaveClick=function(e){document.getElementById("form").checkValidity()&&(e.preventDefault(),s.saveCurrent())},s.onUpdatePhotoClick=function(){document.getElementById("image-file").click()},s.onImageSelected=function(e){var t,a=Object(Q.a)(s),n=e.target.files,c=new FileReader;c.onload=function(e){t=e.target.result,a.setState({avatar:n[0],image_url:t})},c.readAsDataURL(n[0])},s.onLevelChanged=function(e,t){var a=Object.assign([],s.state.levels);a[e]=t,s.setState({levels:a})},s.onAddClassClick=function(e){document.getElementById("form").checkValidity()&&(e.preventDefault(),s.saveCurrent("/admin/students/addclass?id="+s.state._id))},s.state={firstname:"",lastname:"",birthday:Z()().format("YYYY-MM-DD"),started:Z()().format("YYYY-MM-DD"),endDate:Z()().format("YYYY-MM-DD"),is_active:!1,avatar:"",image_url:"",contact_person:"",contact_email:"",contact_phone:"",is_trial:!1,trial_start:Z()().format("YYYY-MM-DD"),trial_end:Z()().format("YYYY-MM-DD"),trial_num_classes:0,levels:[],notes:"",token_info:D("token_info"),belts:[],beltgroups:[]},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;Promise.all([H(R.belt_getall),H(R.beltgroup_getall)]).then((function(t){var a=Object(K.a)(t,2),s=a[0],n=a[1],c=[],i=[];s.data.success?c=s.data.result:e.showMessage(s.data.message),n.data.success?i=n.data.result:e.showMessage(n.data.message),e.setState({belts:c,beltgroups:i,levels:F("",i.length)})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(O.a,{children:Object(z.jsxs)($.a,{id:"form",children:[Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{sm:8,xs:12,children:Object(z.jsxs)(ee.a,{children:[Object(z.jsx)(ee.a.Header,{children:Object(z.jsx)(ee.a.Title,{as:"h4",children:"Add a student"})}),Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{md:"6",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"First Name"}),Object(z.jsx)($.a.Control,{placeholder:"First Name",type:"text",required:!0,value:this.state.firstname,onChange:function(t){return e.setState({firstname:t.target.value})}})]})}),Object(z.jsx)(y.a,{md:"6",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Last Name"}),Object(z.jsx)($.a.Control,{placeholder:"Last Name",type:"text",required:!0,value:this.state.lastname,onChange:function(t){return e.setState({lastname:t.target.value})}})]})})]}),Object(z.jsxs)(v.a,{children:[Object(z.jsxs)(y.a,{md:"6",children:[Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Birthday"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.birthday,required:!0,onChange:function(t){return e.setState({birthday:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Date Started"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.started,onChange:function(t){return e.setState({started:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Contract End Date"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.endDate,onChange:function(t){return e.setState({endDate:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_active,onChange:function(t){return e.setState({is_active:t.target.checked})}}),Object(z.jsx)("label",{children:"Is active?"})]})]}),Object(z.jsx)(y.a,{md:"6",children:Object(z.jsx)(ee.a,{className:"card-user",children:Object(z.jsxs)("div",{className:"card-body vertical-centering-container",children:[Object(z.jsx)("a",{href:"#pablo",onClick:function(e){return e.preventDefault()},className:"mt-3",children:Object(z.jsx)("img",{alt:"",src:this.state.image_url,className:"student_avatar border-gray"})}),Object(z.jsx)("input",{type:"file",className:"hidden",id:"image-file",accept:"image/*",onChange:this.onImageSelected}),Object(z.jsx)(x.a,{variant:"outline-secondary",onClick:this.onUpdatePhotoClick,className:"mt-auto mb-3",children:"Update Photo"})]})})})]}),Object(z.jsxs)(v.a,{children:[Object(z.jsxs)(y.a,{md:"4",children:[Object(z.jsx)("label",{children:"Contact Person"}),Object(z.jsx)($.a.Control,{placeholder:"Contact Person",type:"text",value:this.state.contact_person,onChange:function(t){return e.setState({contact_person:t.target.value})}})]}),Object(z.jsxs)(y.a,{md:"4",children:[Object(z.jsx)("label",{children:"Contact Email"}),Object(z.jsx)($.a.Control,{placeholder:"Contact Email",type:"email",value:this.state.contact_email,onChange:function(t){return e.setState({contact_email:t.target.value})}})]}),Object(z.jsxs)(y.a,{md:"4",children:[Object(z.jsx)("label",{children:"Contact Phone"}),Object(z.jsx)($.a.Control,{placeholder:"Contact Phone",type:"phone",value:this.state.contact_phone,onChange:function(t){return e.setState({contact_phone:t.target.value})}})]})]}),Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{className:"pr-1 pt-4",md:"4",children:Object(z.jsx)("label",{children:"Current Class(es):"})})}),Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"12",className:"mt-2",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Notes"}),Object(z.jsx)($.a.Control,{cols:"80",placeholder:"Please add notes...",rows:"4",as:"textarea",value:this.state.notes,onChange:function(t){return e.setState({notes:t.target.value})}})]})})})]})]})}),Object(z.jsxs)(y.a,{sm:4,xs:12,children:[Object(z.jsxs)(ee.a,{className:"card-user",children:[Object(z.jsx)(ee.a.Header,{children:"Which martial arts is this student studying?"}),Object(z.jsxs)(ee.a.Body,{children:[this.state.beltgroups.map((function(t,a){return Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:t.name}),Object(z.jsxs)($.a.Control,{as:"select",value:e.state.levels[a],onChange:function(t){return e.onLevelChanged(a,t.target.value)},children:[Object(z.jsx)("option",{value:"",children:"None"}),e.state.belts.filter((function(e){return e.group==t._id})).map((function(e){return Object(z.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]},t._id)})),Object(z.jsx)("div",{className:"vertical-centering-container full-width"})]})]}),Object(z.jsxs)(ee.a,{className:"card-user",children:[Object(z.jsx)(ee.a.Header,{children:"Trial Student"}),Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsx)($.a.Group,{children:Object(z.jsxs)("div",{className:"horizontal-centering-container",children:[Object(z.jsx)("label",{children:"Is this a trial?"}),Object(z.jsx)("input",{type:"checkbox",className:"ml-2 mb-2",checked:this.state.is_trial,onChange:function(t){return e.setState({is_trial:t.target.checked})}})]})}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Starts"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.trial_start,onChange:function(t){return e.setState({trial_start:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Ends"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.trial_end,onChange:function(t){return e.setState({trial_end:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"# Classes"}),Object(z.jsx)($.a.Control,{value:this.state.trial_num_classes,placeholder:"",type:"text",onChange:function(t){return e.setState({trial_num_classes:t.target.value})}})]})]})]})]})]}),Object(z.jsxs)(v.a,{children:[Object(z.jsx)(x.a,{onClick:this.onSaveClick,className:"btn-fill float-right ml-auto mr-1",type:"submit",variant:"info",id:"btn-submit",children:"Save"}),Object(z.jsx)(x.a,{onClick:this.onAddClassClick,className:"float-right mr-1",variant:"outline-secondary",type:"submit",children:"Add a class"}),Object(z.jsx)(x.a,{onClick:this.onCloseClick,className:"float-right",variant:"outline-secondary",children:"Close this view"})]})]})})})}}]),a}(n.Component),ae=a(249),se=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.onCloseClick=function(){s.props.history.goBack()},s.saveCurrent=function(e){V(R.student_edit,{_id:s.state._id,firstname:s.state.firstname,lastname:s.state.lastname,birthday:s.state.birthday,date_started:s.state.started,date_end:s.state.endDate,is_active:s.state.is_active,avatar:s.state.avatar,notes:s.state.notes,levels:s.state.levels,contact_person:s.state.contact_person,contact_email:s.state.contact_email,contact_phone:s.state.contact_phone,is_trial:s.state.is_trial,trial_start:s.state.trial_start,trial_end:s.state.trial_end,trial_num_classes:s.state.trial_num_classes,token:s.state.token_info}).then((function(t){t.data.success?e?s.props.history.push(e):s.props.history.goBack():s.showMessage(t.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to save")}))},s.onSaveClick=function(e){document.getElementById("form").checkValidity()&&(e.preventDefault(),s.saveCurrent())},s.onUpdatePhotoClick=function(){document.getElementById("image-file").click()},s.onImageSelected=function(e){var t,a=Object(Q.a)(s),n=e.target.files,c=new FileReader;c.onload=function(e){t=e.target.result,a.setState({avatar:n[0],image_url:t})},c.readAsDataURL(n[0])},s.onLevelChanged=function(e,t){var a=Object.assign([],s.state.levels);a[e]=t,s.setState({levels:a})},s.onAddClassClick=function(e){document.getElementById("form").checkValidity()&&(e.preventDefault(),s.saveCurrent("/admin/students/addclass?id="+s.state._id))},s.onDeleteClick=function(){s.setState({confirm_show:!0})},s.handleClose=function(){s.setState({confirm_show:!1})},s.confirmedDelete=function(){H(R.student_remove,{_id:s.state._id,token:s.state.token_info}).then((function(e){e.data.success?s.props.history.goBack():s.showMessage(e.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to delete this student")}))};var n=new URL(window.location.href);return s.state={_id:n.searchParams.get("id"),firstname:"",lastname:"",birthday:Z()().format("YYYY-MM-DD"),started:Z()().format("YYYY-MM-DD"),endDate:Z()().format("YYYY-MM-DD"),is_active:!1,avatar:"",image_url:"",contact_person:"",contact_email:"",contact_phone:"",is_trial:!1,trial_start:Z()().format("YYYY-MM-DD"),trial_end:Z()().format("YYYY-MM-DD"),trial_num_classes:0,levels:[],notes:"",attendance:[],token_info:D("token_info"),belts:[],beltgroups:[],classes:[],confirm_show:!1},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;Promise.all([H(R.belt_getall),H(R.beltgroup_getall),H(R.student_get,{token:this.state.token_info,_id:this.state._id}),H(R.class_getall,{token:this.state.token_info})]).then((function(t){var a=Object(K.a)(t,4),n=a[0],c=a[1],i=a[2],r=a[3],l=[],o=[],d=[],h={};if(n.data.success?l=n.data.result:e.showMessage(n.data.message),c.data.success?o=c.data.result:e.showMessage(c.data.message),i.data.success){var j=i.data.result;h={firstname:j.firstname,lastname:j.lastname,birthday:Z()(j.birthday).format("YYYY-MM-DD"),started:Z()(j.date_started).format("YYYY-MM-DD"),endDate:Z()(j.date_end).format("YYYY-MM-DD"),is_active:j.is_active,avatar:j.avatar,image_url:R.base_url+j.avatar,contact_person:j.contact_person,contact_email:j.contact_email,contact_phone:j.contact_phone,is_trial:j.is_trial,trial_start:Z()(j.trial_start).format("YYYY-MM-DD"),trial_end:Z()(j.trial_end).format("YYYY-MM-DD"),trial_num_classes:j.trial_num_classes,levels:j.levels,notes:j.notes,attendance:j.attendance||[]}}else e.showMessage(i.data.message);r.data.success&&(d=r.data.result),e.setState(Object(s.a)(Object(s.a)({belts:l,beltgroups:o},h),{},{classes:d}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(O.a,{children:Object(z.jsxs)($.a,{id:"form",children:[Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{sm:8,xs:12,children:Object(z.jsxs)(ee.a,{children:[Object(z.jsx)(ee.a.Header,{children:Object(z.jsx)(ee.a.Title,{as:"h4",children:"Edit a student"})}),Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{md:"6",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"First Name"}),Object(z.jsx)($.a.Control,{placeholder:"First Name",type:"text",required:!0,value:this.state.firstname,onChange:function(t){return e.setState({firstname:t.target.value})}})]})}),Object(z.jsx)(y.a,{md:"6",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Last Name"}),Object(z.jsx)($.a.Control,{placeholder:"Last Name",type:"text",required:!0,value:this.state.lastname,onChange:function(t){return e.setState({lastname:t.target.value})}})]})})]}),Object(z.jsxs)(v.a,{children:[Object(z.jsxs)(y.a,{md:"6",children:[Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Birthday"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.birthday,required:!0,onChange:function(t){return e.setState({birthday:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Date Started"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.started,onChange:function(t){return e.setState({started:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Contract End Date"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.endDate,onChange:function(t){return e.setState({endDate:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_active,onChange:function(t){return e.setState({is_active:t.target.checked})}}),Object(z.jsx)("label",{children:"Is active?"})]})]}),Object(z.jsx)(y.a,{md:"6",children:Object(z.jsx)(ee.a,{className:"card-user",children:Object(z.jsxs)("div",{className:"card-body vertical-centering-container",children:[Object(z.jsx)("a",{href:"#pablo",onClick:function(e){return e.preventDefault()},className:"mt-3",children:Object(z.jsx)("img",{alt:"",src:this.state.image_url,className:"student_avatar border-gray"})}),Object(z.jsx)("input",{type:"file",className:"hidden",id:"image-file",accept:"image/*",onChange:this.onImageSelected}),Object(z.jsx)(x.a,{variant:"outline-secondary",onClick:this.onUpdatePhotoClick,className:"mt-auto mb-3",children:"Update Photo"})]})})})]}),Object(z.jsxs)(v.a,{children:[Object(z.jsxs)(y.a,{md:"4",children:[Object(z.jsx)("label",{children:"Contact Person"}),Object(z.jsx)($.a.Control,{placeholder:"Contact Person",type:"text",value:this.state.contact_person,onChange:function(t){return e.setState({contact_person:t.target.value})}})]}),Object(z.jsxs)(y.a,{md:"4",children:[Object(z.jsx)("label",{children:"Contact Email"}),Object(z.jsx)($.a.Control,{placeholder:"Contact Email",type:"email",value:this.state.contact_email,onChange:function(t){return e.setState({contact_email:t.target.value})}})]}),Object(z.jsxs)(y.a,{md:"4",children:[Object(z.jsx)("label",{children:"Contact Phone"}),Object(z.jsx)($.a.Control,{placeholder:"Contact Phone",type:"phone",value:this.state.contact_phone,onChange:function(t){return e.setState({contact_phone:t.target.value})}})]})]}),Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{className:"pr-1 pt-4",md:"4",children:[Object(z.jsx)("label",{children:"Current Class(es):"}),this.state.attendance.map((function(t){var a=e.state.classes.find((function(e){return e._id==t.class_id}));return a&&t.schedules.length?Object(z.jsx)("div",{style:{borderBottom:"1px solid #ccc"},children:Object(z.jsx)("a",{href:"/admin/class/edit?id="+t.class_id,children:a.name})},a._id):null}))]})}),Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"12",className:"mt-2",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Notes"}),Object(z.jsx)($.a.Control,{cols:"80",placeholder:"Please add notes...",rows:"4",as:"textarea",value:this.state.notes,onChange:function(t){return e.setState({notes:t.target.value})}})]})})})]})]})}),Object(z.jsxs)(y.a,{sm:4,xs:12,children:[Object(z.jsxs)(ee.a,{className:"card-user",children:[Object(z.jsx)(ee.a.Header,{children:"Which martial arts is this student studying?"}),Object(z.jsxs)(ee.a.Body,{children:[this.state.beltgroups.map((function(t,a){return Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:t.name}),Object(z.jsxs)($.a.Control,{as:"select",value:e.state.levels[a],onChange:function(t){return e.onLevelChanged(a,t.target.value)},children:[Object(z.jsx)("option",{value:"",children:"None"}),e.state.belts.filter((function(e){return e.group==t._id})).map((function(e){return Object(z.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]},t._id)})),Object(z.jsx)("div",{className:"vertical-centering-container full-width"})]})]}),Object(z.jsxs)(ee.a,{className:"card-user",children:[Object(z.jsx)(ee.a.Header,{children:"Trial Student"}),Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsx)($.a.Group,{children:Object(z.jsxs)("div",{className:"horizontal-centering-container",children:[Object(z.jsx)("label",{children:"Is this a trial?"}),Object(z.jsx)("input",{type:"checkbox",className:"ml-2 mb-2",checked:this.state.is_trial,onChange:function(t){return e.setState({is_trial:t.target.checked})}})]})}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Starts"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.trial_start,onChange:function(t){return e.setState({trial_start:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Ends"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.trial_end,onChange:function(t){return e.setState({trial_end:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"# Classes"}),Object(z.jsx)($.a.Control,{value:this.state.trial_num_classes,placeholder:"",type:"text",onChange:function(t){return e.setState({trial_num_classes:t.target.value})}})]})]})]})]})]}),Object(z.jsxs)(v.a,{children:[Object(z.jsx)(x.a,{onClick:this.onSaveClick,className:"btn-fill float-right ml-auto mr-1",type:"submit",variant:"info",id:"btn-submit",children:"Save"}),Object(z.jsx)(x.a,{onClick:this.onAddClassClick,className:"float-right mr-1",variant:"outline-secondary",type:"submit",children:"Add a class"}),Object(z.jsx)(x.a,{onClick:this.onDeleteClick,className:"float-right mr-1",variant:"danger",children:"Delete"}),Object(z.jsx)(x.a,{onClick:this.onCloseClick,className:"float-right",variant:"outline-secondary",children:"Close this view"})]})]})}),Object(z.jsxs)(ae.a,{show:this.state.confirm_show,onHide:this.handleClose,children:[Object(z.jsx)(ae.a.Header,{closeButton:!0,children:Object(z.jsx)(ae.a.Title,{children:"Warning"})}),Object(z.jsx)(ae.a.Body,{children:"Are you sure to remove this student?"}),Object(z.jsxs)(ae.a.Footer,{children:[Object(z.jsx)(x.a,{variant:"secondary",onClick:this.handleClose,children:"Cancel"}),Object(z.jsx)(x.a,{variant:"danger",onClick:this.confirmedDelete,children:"OK"})]})]})]})}}]),a}(n.Component),ne=a(253),ce=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ie=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.onSaveClick=function(){V(R.student_edit,{_id:s.state._id,token:s.state.token_info,attendance:JSON.stringify(s.state.attendance)}).then((function(e){e.data.success?s.props.history.goBack():s.showMessage(e.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to save")}))},s.onChecked=function(e,t,a){var n=Object.assign([],s.state.attendance),c=n.findIndex((function(t){return t.class_id==e}));if(c<0){if(!a)return;n.push({class_id:e,schedules:[]}),c=n.length-1}var i=Object.assign([],n[c].schedules);a&&-1==i.indexOf(t)?i.push(t):a||-1==i.indexOf(t)||i.splice(i.indexOf(t),1),0==i.length?n.splice(c,1):n[c]={class_id:e,schedules:i},s.setState({attendance:n})},s.onCloseClick=function(){s.props.history.goBack()},s.onViewToggle=function(){s.setState({view_regular:!s.state.view_regular})};var n=new URL(window.location.href);return s.state={_id:n.searchParams.get("id"),token_info:D("token_info"),classes:[],student:{},attendance:[],view_regular:!0},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;Promise.all([H(R.schedule_getall,{token:this.state.token_info}),H(R.student_get,{_id:this.state._id,token:this.state.token_info})]).then((function(t){var a=Object(K.a)(t,2),s=a[0],n=a[1],c=[],i={};s.data.success?c=s.data.result:e.showMessage(s.data.message),n.data.success?i=n.data.result:e.showMessage(n.data.message),e.setState({classes:c,student:i,attendance:i.attendance||[]})})).catch((function(e){console.log("Failed to fetch data")}))}},{key:"render",value:function(){var e=this,t=this.state.classes.filter((function(t){return t.class[0]&&t.class[0].is_regular==e.state.view_regular&&t.class[0].is_active}));return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"horizontal-centering-container pl-3 pr-3 mb-4",children:[Object(z.jsxs)("div",{className:"",children:["Select ",this.state.view_regular?"regular/weekly":"special"," class schedules for ",this.state.student.firstname+" "+this.state.student.lastname]}),Object(z.jsxs)("div",{className:"horizontal-centering-container",style:{marginLeft:"auto",marginRight:0},children:[Object(z.jsx)(x.a,{onClick:this.onSaveClick,variant:"secondary",className:"btn-fill mr-2",style:{float:"right"},children:"Save"}),Object(z.jsx)(x.a,{onClick:this.onCloseClick,variant:"outline-secondary",className:"mr-2",style:{float:"right"},children:"Close View"}),Object(z.jsx)(x.a,{onClick:this.onViewToggle,variant:"outline-secondary",style:{float:"right"},children:this.state.view_regular?"View special classes":"View regular classes"})]})]}),Object(z.jsx)(O.a,{fluid:!0,children:t.length?t.map((function(t,a){return Object(z.jsx)(ne.a,{children:Object(z.jsxs)(ee.a,{className:"mb-0",children:[Object(z.jsx)(ee.a.Header,{className:"pt-0 px-0",children:Object(z.jsxs)(ne.a.Toggle,{as:x.a,className:"full-width",style:{textAlign:"left"},variant:"link",eventKey:t._id,children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:!!e.state.attendance.find((function(e){return e.class_id==t._id})),readOnly:!0}),t.class[0].name]})}),Object(z.jsx)(ne.a.Collapse,{eventKey:t._id,children:Object(z.jsx)(ee.a.Body,{children:t.schedules.length?t.schedules.map((function(a,s){if(a.is_regular!=t.class[0].is_regular)return null;var n=e.state.attendance.find((function(e){return e.class_id==t._id}));return Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container my-1",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:!!n&&-1!=n.schedules.indexOf(a._id),onChange:function(s){return e.onChecked(t._id,a._id,s.target.checked)}}),Object(z.jsxs)("label",{children:[Object(z.jsx)("span",{style:{width:120,float:"left"},children:a.is_regular?ce[a.weekday]:Z()(a.date).format("YYYY-MM-DD")}),Object(z.jsxs)("span",{children:[a.time_start," - ",a.time_end]})]})]},a._id)})):"No schedules"})})]})},t._id)})):Object(z.jsx)("div",{className:"ml-4",children:"No classes"})})]})}}]),a}(n.Component),re=[{dataField:"name",text:"Name"},{dataField:"birthday",text:"Birthday",formatter:function(e,t,a,s){return Z()(t.birthday).format("MM/DD/yyyy")}},{dataField:"is_active",text:"Is Active?",formatter:function(e,t,a,s){return Object(z.jsx)("input",{type:"checkbox",checked:t.is_active,readOnly:!0})}},{dataField:"is_junior",text:"Junior Leader?",formatter:function(e,t,a,s){return Object(z.jsx)("input",{type:"checkbox",checked:t.is_junior,readOnly:!0})}},{dataField:"",text:"",formatter:function(e,t,a,s){return Object(z.jsx)("a",{href:"/admin/staff/edit?id="+t._id,children:"View Details"})}}],le=N()({page:1,alwaysShowAllBtns:!0,showTotal:!0,withFirstAndLast:!0}),oe=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).onAddClick=function(){s.props.history.push("/admin/staff/add")},s.state={list:[],token_info:D("token_info")},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;H(R.staff_getall,{token:this.state.token_info}).then((function(t){t.data.success?e.setState({list:t.data.result}):console.log(t.data.message)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(x.a,{onClick:this.onAddClick,variant:"outline-secondary",className:"mb-2",style:{float:"right"},children:"Add a staff member"}),Object(z.jsx)(k.a,{keyField:"_id",data:this.state.list,columns:re,pagination:le,bordered:!1})]})}}]),a}(n.Component),de=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.onCloseClick=function(){s.props.history.goBack()},s.onSaveClick=function(e){document.getElementById("form").checkValidity()&&(e.preventDefault(),H(R.staff_add,{name:s.state.name,birthday:s.state.birthday,is_active:s.state.is_active,is_junior:s.state.is_junior,notes:s.state.notes,token:s.state.token_info}).then((function(e){e.data.success?s.props.history.goBack():s.showMessage(e.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to save")})))},s.state={name:"",birthday:Z()().format("YYYY-MM-DD"),is_active:!1,is_junior:!1,notes:"",token_info:D("token_info")},s}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(O.a,{children:Object(z.jsxs)($.a,{id:"form",children:[Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{children:Object(z.jsxs)(ee.a,{children:[Object(z.jsx)(ee.a.Header,{children:Object(z.jsx)(ee.a.Title,{as:"h4",children:"Add a staff member"})}),Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Name"}),Object(z.jsx)($.a.Control,{placeholder:"Name",type:"text",required:!0,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})]})})}),Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{children:[Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Birthday"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.birthday,required:!0,onChange:function(t){return e.setState({birthday:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container mt-4",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_active,onChange:function(t){return e.setState({is_active:t.target.checked})}}),Object(z.jsx)("label",{children:"Is this staff member active?"})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_junior,onChange:function(t){return e.setState({is_junior:t.target.checked})}}),Object(z.jsx)("label",{children:"Is this a Junior Leader?"})]})]})}),Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"12",className:"mt-2",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Notes"}),Object(z.jsx)($.a.Control,{cols:"80",placeholder:"Please add notes...",rows:"4",as:"textarea",value:this.state.notes,onChange:function(t){return e.setState({notes:t.target.value})}})]})})})]})]})})}),Object(z.jsxs)(v.a,{children:[Object(z.jsx)(x.a,{onClick:this.onSaveClick,className:"btn-fill float-right ml-auto mr-1",type:"submit",variant:"info",id:"btn-submit",children:"Save"}),Object(z.jsx)(x.a,{onClick:this.onCloseClick,className:"float-right",variant:"outline-secondary",children:"Close this view"})]})]})})})}}]),a}(n.Component),he=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.onCloseClick=function(){s.props.history.goBack()},s.saveCurrent=function(e){H(R.staff_edit,{_id:s.state._id,name:s.state.name,birthday:s.state.birthday,is_active:s.state.is_active,is_junior:s.state.is_junior,notes:s.state.notes,token:s.state.token_info}).then((function(t){t.data.success?e?s.props.history.replace(e):s.props.history.goBack():s.showMessage(t.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to save")}))},s.onSaveClick=function(e){document.getElementById("form").checkValidity()&&(e.preventDefault(),s.saveCurrent())},s.onDeleteClick=function(e){s.setState({confirm_show:!0})},s.handleClose=function(){s.setState({confirm_show:!1})},s.confirmedDelete=function(){H(R.staff_remove,{_id:s.state._id,token:s.state.token_info}).then((function(e){e.data.success?s.props.history.goBack():s.showMessage(e.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to remove staff")}))},s.onShowSchedule=function(e){document.getElementById("form").checkValidity()&&(e.preventDefault(),s.saveCurrent("/admin/staff/schedule?id="+s.state._id))};var n=new URL(window.location.href);return s.state={_id:n.searchParams.get("id"),name:"",birthday:Z()().format("YYYY-MM-DD"),is_active:!1,is_junior:!1,notes:"",token_info:D("token_info"),confirm_show:!1},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;H(R.staff_get,{_id:this.state._id,token:this.state.token_info}).then((function(t){if(t.data.success){var a=t.data.result;e.setState({name:a.name,birthday:Z()(a.birthday).format("YYYY-MM-DD"),is_active:a.is_active,is_junior:a.is_junior,notes:a.notes})}else e.showMessage(t.data.message)})).catch((function(t){e.showMessage("Failed to get data")}))}},{key:"render",value:function(){var e=this;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(O.a,{children:Object(z.jsxs)($.a,{id:"form",children:[Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{children:Object(z.jsxs)(ee.a,{children:[Object(z.jsx)(ee.a.Header,{children:Object(z.jsx)(ee.a.Title,{as:"h4",children:"Add a staff member"})}),Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Name"}),Object(z.jsx)($.a.Control,{placeholder:"Company",type:"text",required:!0,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})]})})}),Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{children:[Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Birthday"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.birthday,required:!0,onChange:function(t){return e.setState({birthday:t.target.value})}})})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container mt-4",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_active,onChange:function(t){return e.setState({is_active:t.target.checked})}}),Object(z.jsx)("label",{children:"Is this staff member active?"})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_junior,onChange:function(t){return e.setState({is_junior:t.target.checked})}}),Object(z.jsx)("label",{children:"Is this a Junior Leader?"})]})]})}),Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"12",className:"mt-2",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Notes"}),Object(z.jsx)($.a.Control,{cols:"80",placeholder:"Please add notes...",rows:"4",as:"textarea",value:this.state.notes,onChange:function(t){return e.setState({notes:t.target.value})}})]})})})]})]})})}),Object(z.jsxs)(v.a,{children:[Object(z.jsx)(x.a,{onClick:this.onSaveClick,className:"btn-fill float-right ml-auto mr-1",type:"submit",variant:"info",id:"btn-submit",children:"Save"}),Object(z.jsx)(x.a,{onClick:this.onShowSchedule,className:"float-right mr-1",variant:"outline-secondary",type:"submit",children:"Show Schedule"}),Object(z.jsx)(x.a,{onClick:this.onDeleteClick,className:"float-right mr-1",variant:"danger",children:"Delete"}),Object(z.jsx)(x.a,{onClick:this.onCloseClick,className:"float-right",variant:"outline-secondary",children:"Close this view"})]})]})}),Object(z.jsxs)(ae.a,{show:this.state.confirm_show,onHide:this.handleClose,children:[Object(z.jsx)(ae.a.Header,{closeButton:!0,children:Object(z.jsx)(ae.a.Title,{children:"Warning"})}),Object(z.jsx)(ae.a.Body,{children:"Are you sure to remove this staff?"}),Object(z.jsxs)(ae.a.Footer,{children:[Object(z.jsx)(x.a,{variant:"secondary",onClick:this.handleClose,children:"Cancel"}),Object(z.jsx)(x.a,{variant:"danger",onClick:this.confirmedDelete,children:"OK"})]})]})]})}}]),a}(n.Component),je=a(245),ue=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.refreshData=function(e){Promise.all([H(R.schedule_getbystaff,{token:s.state.token_info,staff_id:e}),H(R.staff_getall,{token:s.state.token_info})]).then((function(e){var t=Object(K.a)(e,2),a=t[0],n=t[1],c=[];if(n.data.success&&(c=n.data.result.filter((function(e){return e.is_active}))),a.data.success){for(var i=(i=a.data.result.filter((function(e){return e.class_is_active}))).sort((function(e,t){return e.time_start.localeCompare(t.time_start)})),r=0;r<i.length;r++){for(var l=[],o=0;o<i[r].staffs.length;o++){var d=c.find((function(e){return e._id==i[r].staffs[o]}));d&&l.push(d.name)}var h="";h=l.length>2?l[0]+","+l[1]+"(+"+(l.length-2)+"more)":l.join(","),i[r].staff_str=h}s.setState({schedules:i,staffs:c})}else s.showMessage(a.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to get data")}))},s.onStaffChanged=function(e){s.setState({id:e.target.value}),s.refreshData(e.target.value)},s.onCloseClick=function(){s.props.history.goBack()};var n=new URL(window.location.href);return s.state={id:n.searchParams.get("id"),token_info:D("token_info"),schedules:[],staffs:[]},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.refreshData(this.state.id)}},{key:"render",value:function(){return Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(O.a,{fluid:!0,children:[Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"12",children:Object(z.jsxs)(ee.a,{className:"strpied-tabled-with-hover",children:[Object(z.jsx)(ee.a.Header,{children:Object(z.jsx)($.a,{children:Object(z.jsxs)($.a.Row,{style:{alignItems:"center"},children:[Object(z.jsx)(ee.a.Title,{as:"h4",className:"mr-2 mb-3",children:"Class Schedule of"}),Object(z.jsx)($.a.Group,{children:Object(z.jsx)($.a.Control,{as:"select",value:this.state.id,onChange:this.onStaffChanged,children:this.state.staffs.map((function(e){return Object(z.jsx)("option",{value:e._id,children:e.name},e._id)}))})})]})})}),Object(z.jsx)(ee.a.Body,{className:"table-full-width table-responsive px-0",children:Object(z.jsxs)(je.a,{className:"table-hover table-striped",children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{className:"border-0"}),Object(z.jsx)("th",{className:"border-0",children:"Class time"}),Object(z.jsx)("th",{className:"border-0",children:"# of students"}),Object(z.jsx)("th",{className:"border-0",children:"Instructors"})]})}),Object(z.jsx)("tbody",{children:this.state.schedules.map((function(e){return Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("a",{href:"/admin/class/edit?id="+e.class_id,children:e.class_name})}),Object(z.jsxs)("td",{children:[e.time_start," - ",e.time_end]}),Object(z.jsx)("td",{children:e.num_students}),Object(z.jsx)("td",{children:e.staff_str})]},e._id)}))})]})})]})})}),Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"12",children:Object(z.jsx)(x.a,{onClick:this.onCloseClick,className:"float-right mr-1",variant:"outline-secondary",children:"Close this view"})})})]})})}}]),a}(n.Component),me=a(246),be=a(247),fe=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).onToggleActive=function(e){s.setState({active_only:e.target.checked})},s.showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.viewCalendar=function(){s.props.history.push("/admin/class/calendar")},s.toggleViewRegular=function(){var e=!s.state.view_regular,t=s.state.all_classes.filter((function(t){return t.is_regular==e}));s.setState({view_regular:e,class_list:t})},s.addNewClass=function(){s.props.history.push("/admin/class/add")},s.state={view_regular:!0,active_only:!0,token_info:D("token_info"),all_classes:[],class_list:[]},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;H(R.class_getall,{token:this.state.token_info}).then((function(t){if(t.data.success){var a=t.data.result.filter((function(t){return t.is_regular==e.state.view_regular}));e.setState({class_list:a,all_classes:t.data.result})}else e.showMessage(t.data.message)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.class_list;return this.state.active_only&&(e=e.filter((function(e){return e.is_active}))),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"horizontal-centering-container pl-3 pr-3",children:[Object(z.jsx)("div",{className:"",children:this.state.view_regular?"List of Weekly Classes":"List of Special Classes"}),Object(z.jsxs)("div",{className:"horizontal-centering-container",style:{marginLeft:"auto",marginRight:0},children:[Object(z.jsx)("div",{className:"mr-2",children:"Displaying"}),Object(z.jsx)(me.a,{toggle:!0,children:Object(z.jsx)(be.a,{type:"checkbox",variant:"outline-secondary",checked:this.state.active_only,onChange:this.onToggleActive,children:"Active Only"})})]})]}),Object(z.jsxs)(O.a,{fluid:!0,children:[Object(z.jsxs)(ee.a,{className:"strpied-tabled-with-hover mt-4",children:[Object(z.jsx)(ee.a.Header,{children:Object(z.jsx)(ee.a.Title,{as:"h4",children:"Class"})}),Object(z.jsx)(ee.a.Body,{className:"table-full-width table-responsive px-4",children:Object(z.jsx)(v.a,{children:e.map((function(e,t){return Object(z.jsx)(y.a,{md:"3",sm:"6",xs:"12",children:Object(z.jsx)("a",{href:"/admin/class/edit?id="+e._id,children:e.name})},e._id)}))})})]}),Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{md:"12",children:[Object(z.jsx)(x.a,{onClick:this.toggleViewRegular,className:"float-right",variant:"outline-secondary",children:this.state.view_regular?"View special classes":"View regular classes"}),Object(z.jsx)(x.a,{onClick:this.viewCalendar,className:"float-right mr-1",variant:"outline-secondary",children:"View calendar"}),Object(z.jsx)(x.a,{onClick:this.addNewClass,className:"btn-fill float-right ml-auto mr-1",variant:"outline-secondary",children:"Add a new class"})]})})]})]})}}]),a}(n.Component),Oe=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.onCloseClick=function(){s.props.history.goBack()},s.saveCurrent=function(e){H(R.class_add,{name:s.state.name,is_regular:s.state.is_regular,is_active:s.state.is_active,is_testing:s.state.is_testing,towards_next:s.state.towards_next,belt_group:s.state.belt_group,token:s.state.token_info}).then((function(t){if(t.data.success){var a=t.data.id;e?s.props.history.replace(e+"?id="+a):s.props.history.goBack()}else s.showMessage(t.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to save")}))},s.onSaveClick=function(e){document.getElementById("form").checkValidity()&&(e.preventDefault(),s.saveCurrent())},s.onShowSchedule=function(e){document.getElementById("form").checkValidity()&&(e.preventDefault(),s.saveCurrent("/admin/class/schedule"))},s.onBeltGroupChanged=function(e){var t=e.target.value,a=s.state.allbelts.filter((function(e){return e.group==t}));s.setState({belt_group:t,activebelts:a})},s.state={token_info:D("token_info"),name:"",is_regular:!1,is_testing:!1,towards_next:!1,is_active:!1,belt_group:"",beltgroups:[],allbelts:[],activebelts:[]},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;Promise.all([H(R.beltgroup_getall),H(R.belt_getall)]).then((function(t){var a=Object(K.a)(t,2),s=a[0],n=a[1],c=[],i=[];s.data.success&&(i=s.data.result),n.data.success&&(c=n.data.result);var r=i.length>0?i[0]._id:"",l=c.filter((function(e){return e.group==r}));e.setState({beltgroups:i,allbelts:c,activebelts:l,belt_group:r})})).catch((function(t){console.log(t),e.showMessage("Failed to get data")}))}},{key:"render",value:function(){var e=this;return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(O.a,{children:Object(z.jsxs)($.a,{id:"form",children:[Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{children:Object(z.jsxs)(ee.a,{children:[Object(z.jsx)(ee.a.Header,{children:Object(z.jsx)(ee.a.Title,{as:"h4",children:"Class Setup"})}),Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"3",sm:"4",xs:"12",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Class name"}),Object(z.jsx)($.a.Control,{placeholder:"Class Name",type:"text",required:!0,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})]})})}),Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{children:[Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container mt-4",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_regular,onChange:function(t){return e.setState({is_regular:t.target.checked})}}),Object(z.jsx)("label",{children:"Is this a regular/weekly class?"})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_testing,onChange:function(t){return e.setState({is_testing:t.target.checked})}}),Object(z.jsx)("label",{children:"Is there testing?"})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.towards_next,onChange:function(t){return e.setState({towards_next:t.target.checked})}}),Object(z.jsx)("label",{children:"Does attendance count towards next belt?"})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_active,onChange:function(t){return e.setState({is_active:t.target.checked})}}),Object(z.jsx)("label",{children:"Is this an active class?"})]})]})}),Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"3",sm:"4",xs:"12",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Belt Group"}),Object(z.jsx)($.a.Control,{as:"select",required:!0,value:this.state.belt_group,onChange:this.onBeltGroupChanged,children:this.state.beltgroups.map((function(e,t){return Object(z.jsx)("option",{value:e._id,children:e.name},e._id)}))})]})})})]})]})})}),Object(z.jsxs)(v.a,{children:[Object(z.jsx)(x.a,{onClick:this.onSaveClick,className:"btn-fill float-right ml-auto mr-1",type:"submit",variant:"info",id:"btn-submit",children:"Save"}),Object(z.jsx)(x.a,{onClick:this.onCloseClick,className:"float-right mr-1",variant:"outline-secondary",children:"Close this view"}),Object(z.jsx)(x.a,{onClick:this.onShowSchedule,className:"float-right",variant:"outline-secondary",type:"submit",children:"Show Schedule"})]})]})})})}}]),a}(n.Component),xe=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.onCloseClick=function(){s.props.history.goBack()},s.saveCurrent=function(e){H(R.class_edit,{_id:s.state._id,name:s.state.name,is_regular:s.state.is_regular,is_active:s.state.is_active,is_testing:s.state.is_testing,towards_next:s.state.towards_next,belt_group:s.state.belt_group,token:s.state.token_info}).then((function(t){t.data.success?e?s.props.history.push(e+"?id="+s.state._id):s.props.history.goBack():s.showMessage(t.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to save")}))},s.onSaveClick=function(e){document.getElementById("form").checkValidity()&&(e.preventDefault(),s.saveCurrent())},s.onShowSchedule=function(e){document.getElementById("form").checkValidity()&&(e.preventDefault(),s.saveCurrent("/admin/class/schedule"))},s.onBeltGroupChanged=function(e){var t=e.target.value,a=s.state.allbelts.filter((function(e){return e.group==t}));s.setState({belt_group:t,activebelts:a})};var n=new URL(window.location.href);return s.state={_id:n.searchParams.get("id"),token_info:D("token_info"),name:"",is_regular:!1,is_testing:!1,towards_next:!1,is_active:!1,belt_group:"",beltgroups:[],allbelts:[],activebelts:[]},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;Promise.all([H(R.beltgroup_getall),H(R.belt_getall),H(R.class_get,{_id:this.state._id,token:this.state.token_info})]).then((function(t){var a=Object(K.a)(t,3),s=a[0],n=a[1],c=a[2],i=[],r=[];if(s.data.success&&(r=s.data.result),n.data.success&&(i=n.data.result),c.data.success){var l=c.data.result;e.setState({name:l.name,is_regular:l.is_regular,is_testing:l.is_testing,is_active:l.is_active,towards_next:l.towards_next,belt_group:l.belt_group})}var o=l.belt_group,d=i.filter((function(e){return e.group==o}));e.setState({beltgroups:r,allbelts:i,activebelts:d})})).catch((function(t){console.log(t),e.showMessage("Failed to get data")}))}},{key:"render",value:function(){var e=this;return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(O.a,{children:Object(z.jsxs)($.a,{id:"form",children:[Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{children:Object(z.jsxs)(ee.a,{children:[Object(z.jsx)(ee.a.Header,{children:Object(z.jsx)(ee.a.Title,{as:"h4",children:"Class Setup"})}),Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"3",sm:"4",xs:"12",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Class name"}),Object(z.jsx)($.a.Control,{placeholder:"Class Name",type:"text",required:!0,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})]})})}),Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{children:[Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container mt-4",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_regular,onChange:function(t){return e.setState({is_regular:t.target.checked})}}),Object(z.jsx)("label",{children:"Is this a regular/weekly class?"})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_testing,onChange:function(t){return e.setState({is_testing:t.target.checked})}}),Object(z.jsx)("label",{children:"Is there testing?"})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.towards_next,onChange:function(t){return e.setState({towards_next:t.target.checked})}}),Object(z.jsx)("label",{children:"Does attendance count towards next belt?"})]}),Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:this.state.is_active,onChange:function(t){return e.setState({is_active:t.target.checked})}}),Object(z.jsx)("label",{children:"Is this an active class?"})]})]})}),Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"3",sm:"4",xs:"12",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Belt Group"}),Object(z.jsx)($.a.Control,{as:"select",required:!0,value:this.state.belt_group,onChange:this.onBeltGroupChanged,children:this.state.beltgroups.map((function(e,t){return Object(z.jsx)("option",{value:e._id,children:e.name},e._id)}))})]})})})]})]})})}),Object(z.jsxs)(v.a,{children:[Object(z.jsx)(x.a,{onClick:this.onSaveClick,className:"btn-fill float-right ml-auto mr-1",type:"submit",variant:"info",id:"btn-submit",children:"Save"}),Object(z.jsx)(x.a,{onClick:this.onCloseClick,className:"float-right mr-1",variant:"outline-secondary",children:"Close this view"}),Object(z.jsx)(x.a,{onClick:this.onShowSchedule,className:"float-right",variant:"outline-secondary",type:"submit",children:"Show Schedule"})]})]})})})}}]),a}(n.Component),_e=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.refreshData=function(e){Promise.all([H(R.schedule_getbydate,{token:s.state.token_info,date:e}),H(R.staff_getall,{token:s.state.token_info})]).then((function(e){var t=Object(K.a)(e,2),a=t[0],n=t[1],c=[];if(n.data.success&&(c=n.data.result.filter((function(e){return e.is_active}))),a.data.success){for(var i=(i=a.data.result.filter((function(e){return e.class_is_active}))).sort((function(e,t){return e.time_start.localeCompare(t.time_start)})),r=0;r<i.length;r++){for(var l=[],o=0;o<i[r].staffs.length;o++){var d=c.find((function(e){return e._id==i[r].staffs[o]}));d&&l.push(d.name)}var h="";h=l.length>2?l[0]+","+l[1]+"(+"+(l.length-2)+"more)":l.join(","),i[r].staff_str=h}s.setState({schedules:i,staffs:c})}else s.showMessage(a.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to get data")}))},s.onDayChanged=function(e){s.setState({date:e.target.value}),s.refreshData(e.target.value)},s.onCloseClick=function(){s.props.history.goBack()};var n=new URL(window.location.href);return s.state={date:n.searchParams.get("date"),token_info:D("token_info"),schedules:[],staffs:[]},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.refreshData(new Date(this.state.date))}},{key:"render",value:function(){return Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(O.a,{fluid:!0,children:[Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"12",children:Object(z.jsxs)(ee.a,{className:"strpied-tabled-with-hover",children:[Object(z.jsx)(ee.a.Header,{children:Object(z.jsx)($.a,{children:Object(z.jsxs)($.a.Row,{style:{alignItems:"center"},children:[Object(z.jsx)(ee.a.Title,{as:"h4",className:"mr-2 mb-3",children:"Class Schedule on"}),Object(z.jsx)($.a.Group,{children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.date,onChange:this.onDayChanged})})]})})}),Object(z.jsx)(ee.a.Body,{className:"table-full-width table-responsive px-0",children:Object(z.jsxs)(je.a,{className:"table-hover table-striped",children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{className:"border-0"}),Object(z.jsx)("th",{className:"border-0",children:"Class time"}),Object(z.jsx)("th",{className:"border-0",children:"# of students"}),Object(z.jsx)("th",{className:"border-0",children:"Instructors"})]})}),Object(z.jsx)("tbody",{children:this.state.schedules.map((function(e){return Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("a",{href:"/admin/class/edit?id="+e.class_id,children:e.class_name})}),Object(z.jsxs)("td",{children:[e.time_start," - ",e.time_end]}),Object(z.jsx)("td",{children:e.num_students}),Object(z.jsx)("td",{children:e.staff_str})]},e._id)}))})]})})]})})}),Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"12",children:Object(z.jsx)(x.a,{onClick:this.onCloseClick,className:"float-right mr-1",variant:"outline-secondary",children:"Close this view"})})})]})})}}]),a}(n.Component),ge=a(124),pe=a.n(ge),ve=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(z.jsxs)("div",{className:"calendar_float_cell",style:{position:"absolute",left:this.props.left,top:this.props.top,height:this.props.bottom-this.props.top,width:this.props.width,backgroundColor:this.props.backgroundColor},children:[Object(z.jsx)("div",{children:this.props.name}),Object(z.jsxs)("div",{children:[this.props.time_start," - ",this.props.time_end]})]})}}]),a}(n.Component),ye=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).refreshData=function(e){H(R.schedule_getbyinterval,{token:s.state.token_info,date_start:e,date_end:B(e,7)}).then((function(e){e.data.success?s.processData(s.state.classes,e.data.result):s.showMessage(e.data.message)})).catch((function(e){console.log(e)}))},s._processOneCluster=function(e,t,a,s){for(var n=[],c=60+60/s,i=s>1?(120-c)/(s-1):0,r=t;r<a;r++){for(var l=s-1,o=s-1;o>=0;o--)(n[o]<0||void 0==n[o]||e[n[o]].bottom<=e[r].top)&&(n[o]=-1,l=o);n[l]=r,e[r].left=e[r].left+i*l,e[r].width=c}},s.processData=function(e,t){for(var a=[],n=0;n<t.length;n++){var c=t[n],i=e.find((function(e){return e._id==c.class_id}));if(i&&i.is_active){var r=c.is_regular?(c.weekday+6)%7:(new Date(c.date).getDay()+6)%7;a.push({_id:c._id,name:i?i.name:"",time_start:c.time_start,time_end:c.time_end,left:128*r,top:48*A(c.time_start)/60,bottom:48*A(c.time_end)/60,backgroundColor:pe()({luminosity:"light",seed:c.class_id}),width:128})}}a.sort((function(e,t){return e.left!=t.left?e.left-t.left:e.top-t.top}));var l=[],o=0,d=0;for(n=0;n<a.length;n++){var h=a[n],j=l.filter((function(e){return a[e].bottom>h.top&&a[e].left==h.left}));0==j.length&&(s._processOneCluster(a,o,n,d),o=n,d=0),j.push(n),l=j,d=Math.max(d,l.length)}s._processOneCluster(a,o,a.length,d),s.setState({classes:e,schedules:a})},s.showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.closeView=function(){s.props.history.goBack()},s.onLeftClick=function(){var e=B(s.state.current_start,-7);s.setState({current_start:e}),s.refreshData(e)},s.onRightClick=function(){var e=B(s.state.current_start,7);s.setState({current_start:e}),s.refreshData(e)},s.onColumnClick=function(e){s.props.history.push("/admin/class/daily?date="+Z()(B(s.state.current_start,e)).format("YYYY-MM-DD"))},s.state={current_start:I(new Date),token_info:D("token_info"),schedules:[],classes:[]},s.calendarBodyRef=c.a.createRef(),s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;H(R.class_getall,{token:this.state.token_info}).then((function(t){t.data.success?e.processData(t.data.result,e.state.schedules):e.showMessage(t.data.message)})).catch((function(e){console.log(e)})),this.refreshData(this.state.current_start),this.calendarBodyRef.current.scrollTop=576}},{key:"render",value:function(){var e=this;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"horizontal-centering-container pl-3 pr-3",children:[Object(z.jsx)("div",{className:"",children:"Calendar View of Schedule"}),Object(z.jsx)("div",{className:"horizontal-centering-container",style:{marginLeft:"auto",marginRight:0},children:Object(z.jsx)(x.a,{variant:"secondary",onClick:this.closeView,children:"Close this view"})})]}),Object(z.jsx)(ee.a,{className:"mt-4",children:Object(z.jsx)(ee.a.Body,{className:"px-4",children:Object(z.jsx)("div",{className:"calendar_container",children:Object(z.jsxs)("div",{className:"calendar_box",children:[Object(z.jsxs)("div",{className:"calendar_header",children:[Object(z.jsxs)("div",{className:"calendar_navcell",children:[Object(z.jsx)(x.a,{variant:"light",style:Ce.btn_nav,onClick:this.onLeftClick,children:Object(z.jsx)("div",{style:Ce.arrowLeft})}),Object(z.jsx)(x.a,{variant:"light",style:Ce.btn_nav,onClick:this.onRightClick,children:Object(z.jsx)("div",{style:Ce.arrowRight})})]}),Object(z.jsxs)("div",{style:{borderRight:"1px solid #ccc"},children:[Object(z.jsxs)("div",{style:{height:24,borderBottom:"1px solid #ccc",fontSize:14,paddingLeft:12},children:[Z()(this.state.current_start).format("MM/DD/YYYY")," ~ ",Z()(B(this.state.current_start,6)).format("MM/DD/YYYY")]}),Object(z.jsxs)("div",{style:{display:"flex"},children:[Object(z.jsx)("div",{className:"calendar_daycell",children:"Monday"}),Object(z.jsx)("div",{className:"calendar_daycell",children:"Tuesday"}),Object(z.jsx)("div",{className:"calendar_daycell",children:"Wednesday"}),Object(z.jsx)("div",{className:"calendar_daycell",children:"Thursday"}),Object(z.jsx)("div",{className:"calendar_daycell",children:"Friday"}),Object(z.jsx)("div",{className:"calendar_daycell",children:"Saturday"}),Object(z.jsx)("div",{className:"calendar_daycell",style:{borderRight:"none"},children:"Sunday"})]})]})]}),Object(z.jsxs)("div",{className:"calendar_body",ref:this.calendarBodyRef,children:[Object(z.jsxs)("div",{className:"calendar_timeline",children:[Object(z.jsx)("div",{className:"calendar_timecell",children:"12:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"1:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"2:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"3:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"4:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"5:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"6:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"7:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"8:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"9:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"10:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"11:00 AM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"12:00 PM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"1:00 PM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"2:00 PM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"3:00 PM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"4:00 PM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"5:00 PM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"6:00 PM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"7:00 PM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"8:00 PM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"9:00 PM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"10:00 PM"}),Object(z.jsx)("div",{className:"calendar_timecell",children:"11:00 PM"})]}),Object(z.jsxs)("div",{className:"calendar_main",children:[[0,1,2,3,4,5,6].map((function(e){return Object(z.jsx)("div",{className:"calendar_column",children:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23].map((function(t){return Object(z.jsxs)("div",{className:"calendar_cell",children:[Object(z.jsx)("div",{className:"calendar_bgcell0"}),Object(z.jsx)("div",{className:"calendar_bgcell1"})]},"calendar_cell_"+e+"_"+t)}))},"calendar_column_"+e)})),this.state.schedules.map((function(e){return Object(z.jsx)(ve,{name:e.name,backgroundColor:e.backgroundColor,top:e.top,bottom:e.bottom,left:e.left,time_start:e.time_start,time_end:e.time_end,width:e.width},e._id)})),[0,1,2,3,4,5,6].map((function(t){return Object(z.jsx)("div",{className:"calendar_column_overlay",style:{left:128*t},onClick:function(){return e.onColumnClick(t)}},"calendar_column_overlay_"+t)}))]})]})]})})})})]})}}]),a}(n.Component),Ce={arrowLeft:{width:0,height:0,borderTop:"4px solid transparent",borderBottom:"4px solid transparent",borderRight:"4px solid black"},arrowRight:{width:0,height:0,borderTop:"4px solid transparent",borderBottom:"4px solid transparent",borderLeft:"4px solid black"},btn_nav:{border:"none",padding:0,flex:1,display:"flex",justifyContent:"center",alignItems:"center"}},ke=ye,we=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ne=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.closeView=function(){s.props.history.goBack()},s.addNewSession=function(){s.setState({show_modal:1,session_room_id:s.state.rooms[0]._id,session_date:new Date,session_weekday:1,session_start:"",session_end:""})},s.onMofifyClicked=function(e){s.setState({show_modal:2,session_id:e._id,session_room_id:e.room_id,session_date:e.date,session_weekday:e.weekday,session_start:e.time_start,session_end:e.time_end})},s.onAssignClicked=function(e){s.setState({show_assign_modal:!0,session_id:e._id,session_staffs:e.staffs})},s.onAssignChanged=function(e,t){if(t&&-1==s.state.session_staffs.indexOf(e))(a=Object.assign([],s.state.session_staffs)).push(e),s.setState({session_staffs:a});else if(!t&&-1!=s.state.session_staffs.indexOf(e)){var a=Object.assign([],s.state.session_staffs),n=s.state.session_staffs.indexOf(e);a.splice(n,1),s.setState({session_staffs:a})}},s.onDeleteClicked=function(e){s.setState({session_id:e._id,show_confirm_modal:!0})},s.handleOk=function(){var e=1==s.state.show_modal?R.schedule_add:R.schedule_edit,t={class_id:s.state.class_id,is_regular:s.state.class_is_regular,room_id:s.state.session_room_id,weekday:s.state.session_weekday,date:s.state.session_date,time_start:s.state.session_start,time_end:s.state.session_end,token:s.state.token_info};2==s.state.show_modal?t._id=s.state.session_id:t.staffs=[],s.handleClose(),H(e,t).then((function(e){e.data.success?window.location.reload():s.showMessage(e.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to add session")}))},s.handleAssign=function(){var e=R.schedule_edit,t={_id:s.state.session_id,staffs:s.state.session_staffs,token:s.state.token_info};s.handleCloseAssignModal(),H(e,t).then((function(e){e.data.success?window.location.reload():s.showMessage(e.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to add session")}))},s.confirmedDelete=function(){H(R.schedule_remove,{_id:s.state.session_id,token:s.state.token_info}).then((function(e){e.data.success?window.location.reload():s.showMessage(e.data.message)})).catch((function(e){console.log(e),s.showMessage("Failed to delete schedule")}))},s.handleClose=function(){s.setState({show_modal:0})},s.handleCloseConfirm=function(){s.setState({show_confirm_modal:!1})},s.handleCloseAssignModal=function(){s.setState({show_assign_modal:!1})};var n=new URL(window.location.href);return s.state={class_id:n.searchParams.get("id"),token_info:D("token_info"),class_name:"",class_is_regular:!0,list:[],rooms:[],staffs:[],show_modal:0,show_assign_modal:!1,show_confirm_modal:!1,session_id:"",session_date:Z()().format("YYYY-MM-DD"),session_room_id:"",session_weekday:1,session_start:"",session_end:"",session_staffs:[]},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;Promise.all([H(R.schedule_getbyclass,{class_id:this.state.class_id,token:this.state.token_info}),H(R.room_getall,{token:this.state.token_info}),H(R.staff_getall,{token:this.state.token_info})]).then((function(t){var a=Object(K.a)(t,3),s=a[0],n=a[1],c=a[2],i=[],r=[];if(n.data.success&&(i=n.data.result),c.data.success&&(r=c.data.result.filter((function(e){return e.is_active}))),s.data.success){for(var l=s.data.result,o=l.schedules,d=0;d<o.length;d++){for(var h=[],j=0;j<o[d].staffs.length;j++){var u=r.find((function(e){return e._id==o[d].staffs[j]}));u&&h.push(u.name)}var m="";m=h.length>2?h[0]+","+h[1]+"(+"+(h.length-2)+"more)":h.join(","),o[d].staff_str=m}e.setState({list:l.schedules,class_name:l.class.name,class_is_regular:l.class.is_regular,rooms:i,staffs:r})}else e.showMessage(s.data.message)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(O.a,{fluid:!0,children:[Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"12",children:Object(z.jsxs)(ee.a,{className:"strpied-tabled-with-hover",children:[Object(z.jsx)(ee.a.Header,{children:Object(z.jsxs)(ee.a.Title,{as:"h4",children:["Class Schedule for ",this.state.class_name]})}),Object(z.jsx)(ee.a.Body,{className:"table-full-width table-responsive px-0",children:Object(z.jsxs)(je.a,{className:"table-hover table-striped",children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{className:"border-0",children:"Date"}),Object(z.jsx)("th",{className:"border-0",children:"Timeline"}),Object(z.jsx)("th",{className:"border-0",children:"# Students"}),Object(z.jsx)("th",{className:"border-0",children:"Instructors"}),Object(z.jsx)("th",{className:"border-0",style:{width:56}}),Object(z.jsx)("th",{className:"border-0",style:{width:56}}),Object(z.jsx)("th",{className:"border-0",style:{width:56}})]})}),Object(z.jsx)("tbody",{children:this.state.list.map((function(t){return Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:e.state.class_is_regular?we[t.weekday]:Z()(t.date).format("MM/DD/YYYY")}),Object(z.jsxs)("td",{children:[t.time_start," - ",t.time_end]}),Object(z.jsx)("td",{children:t.num_students}),Object(z.jsx)("td",{children:t.staff_str}),Object(z.jsx)("td",{children:Object(z.jsx)(x.a,{variant:"outline-secondary",onClick:function(){return e.onMofifyClicked(t)},children:"Modify"})}),Object(z.jsx)("td",{children:Object(z.jsx)(x.a,{variant:"outline-secondary",onClick:function(){return e.onAssignClicked(t)},children:"Assign"})}),Object(z.jsx)("td",{children:Object(z.jsx)(x.a,{variant:"danger",onClick:function(){return e.onDeleteClicked(t)},children:"Delete"})})]},t._id)}))})]})})]})})}),Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{md:"12",children:[Object(z.jsx)(x.a,{onClick:this.closeView,className:"float-right mr-1",variant:"outline-secondary",children:"Close this view"}),Object(z.jsx)(x.a,{onClick:this.addNewSession,className:"btn-fill float-right ml-auto mr-1",variant:"outline-secondary",children:"Add class session"})]})})]}),Object(z.jsxs)(ae.a,{show:!!this.state.show_modal,onHide:this.handleClose,backdrop:"static",keyboard:!1,children:[Object(z.jsx)(ae.a.Header,{closeButton:!0,children:Object(z.jsx)(ae.a.Title,{children:2==this.state.show_modal?"Modify Session":"Add Session"})}),Object(z.jsx)(ae.a.Body,{children:Object(z.jsxs)($.a,{children:[Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Class"}),Object(z.jsx)($.a.Control,{type:"text",value:this.state.class_name,readOnly:!0})]}),Object(z.jsxs)($.a.Group,{className:this.state.class_is_regular?"":"hidden",children:[Object(z.jsx)("label",{children:"Room"}),Object(z.jsx)($.a.Control,{as:"select",value:this.state.session_room_id,onChange:function(t){return e.setState({session_room_id:t.target.value})},children:this.state.rooms.map((function(e,t){return Object(z.jsx)("option",{value:e._id,children:e.name},e._id)}))})]}),Object(z.jsxs)($.a.Group,{className:this.state.class_is_regular?"":"hidden",children:[Object(z.jsx)("label",{children:"Date"}),Object(z.jsxs)($.a.Control,{as:"select",value:this.state.session_weekday,onChange:function(t){return e.setState({session_weekday:t.target.value})},children:[Object(z.jsx)("option",{value:"1",children:"Monday"}),Object(z.jsx)("option",{value:"2",children:"Tuesday"}),Object(z.jsx)("option",{value:"3",children:"Wednesday"}),Object(z.jsx)("option",{value:"4",children:"Thursday"}),Object(z.jsx)("option",{value:"5",children:"Friday"}),Object(z.jsx)("option",{value:"6",children:"Saturday"}),Object(z.jsx)("option",{value:"0",children:"Sunday"})]})]}),Object(z.jsxs)($.a.Group,{className:this.state.class_is_regular?"hidden":"",children:[Object(z.jsx)("label",{children:"Date"}),Object(z.jsx)($.a.Control,{type:"date",value:this.state.session_date,onChange:function(t){return e.setState({session_date:t.target.value})}})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Start Time"}),Object(z.jsx)($.a.Control,{type:"time",value:this.state.session_start,step:"60",onChange:function(t){return e.setState({session_start:t.target.value})}})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"End Time"}),Object(z.jsx)($.a.Control,{type:"time",value:this.state.session_end,step:"60",onChange:function(t){return e.setState({session_end:t.target.value})}})]})]})}),Object(z.jsxs)(ae.a.Footer,{children:[Object(z.jsx)(x.a,{variant:"secondary",onClick:this.handleClose,children:"Cancel"}),Object(z.jsx)(x.a,{variant:"primary",onClick:this.handleOk,className:"btn-fill",children:2==this.state.show_modal?"Modify":"Add"})]})]}),Object(z.jsxs)(ae.a,{show:this.state.show_assign_modal,onHide:this.handleCloseAssignModal,children:[Object(z.jsx)(ae.a.Header,{closeButton:!0,children:Object(z.jsx)(ae.a.Title,{children:"Assign instructors"})}),Object(z.jsx)(ae.a.Body,{style:{maxHeight:"80%"},children:Object(z.jsx)($.a,{children:this.state.staffs.map((function(t){return Object(z.jsxs)($.a.Group,{className:"horizontal-centering-container",children:[Object(z.jsx)("input",{type:"checkbox",className:"mb-2 mr-2",checked:-1!=e.state.session_staffs.indexOf(t._id),onChange:function(a){return e.onAssignChanged(t._id,a.target.checked)}}),Object(z.jsx)("label",{children:t.name})]},t._id)}))})}),Object(z.jsxs)(ae.a.Footer,{children:[Object(z.jsx)(x.a,{variant:"secondary",onClick:this.handleCloseAssignModal,children:"Cancel"}),Object(z.jsx)(x.a,{variant:"danger",onClick:this.handleAssign,children:"Save"})]})]}),Object(z.jsxs)(ae.a,{show:this.state.show_confirm_modal,onHide:this.handleCloseConfirm,children:[Object(z.jsx)(ae.a.Header,{closeButton:!0,children:Object(z.jsx)(ae.a.Title,{children:"Warning"})}),Object(z.jsx)(ae.a.Body,{children:"Are you sure to delete this schedule?"}),Object(z.jsxs)(ae.a.Footer,{children:[Object(z.jsx)(x.a,{variant:"secondary",onClick:this.handleCloseConfirm,children:"Cancel"}),Object(z.jsx)(x.a,{variant:"danger",onClick:this.confirmedDelete,children:"OK"})]})]})]})}}]),a}(n.Component);var Se=function(){return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(O.a,{fluid:!0,children:Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{md:"12",children:Object(z.jsxs)(ee.a,{children:[Object(z.jsxs)(ee.a.Header,{children:[Object(z.jsx)(ee.a.Title,{as:"h4",children:"Light Bootstrap Table Heading"}),Object(z.jsx)("p",{className:"card-category",children:"Created using Montserrat Font Family"})]}),Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsx)("div",{className:"typography-line",children:Object(z.jsxs)("h1",{children:[Object(z.jsx)("span",{children:"Header 1"}),"The Life of Light Bootstrap Dashboard React"]})}),Object(z.jsx)("div",{className:"typography-line",children:Object(z.jsxs)("h2",{children:[Object(z.jsx)("span",{children:"Header 2"}),"The Life of Light Bootstrap Dashboard React"]})}),Object(z.jsx)("div",{className:"typography-line",children:Object(z.jsxs)("h3",{children:[Object(z.jsx)("span",{children:"Header 3"}),"The Life of Light Bootstrap Dashboard React"]})}),Object(z.jsx)("div",{className:"typography-line",children:Object(z.jsxs)("h4",{children:[Object(z.jsx)("span",{children:"Header 4"}),"The Life of Light Bootstrap Dashboard React"]})}),Object(z.jsx)("div",{className:"typography-line",children:Object(z.jsxs)("h5",{children:[Object(z.jsx)("span",{children:"Header 5"}),"The Life of Light Bootstrap Dashboard React"]})}),Object(z.jsx)("div",{className:"typography-line",children:Object(z.jsxs)("h6",{children:[Object(z.jsx)("span",{children:"Header 6"}),"The Life of Light Bootstrap Dashboard React"]})}),Object(z.jsx)("div",{className:"typography-line",children:Object(z.jsxs)("p",{children:[Object(z.jsx)("span",{children:"Paragraph"}),"I will be the leader of a company that ends up being worth billions of dollars, because I got the answers. I understand culture. I am the nucleus. I think that\u2019s a responsibility that I have, to push possibilities, to show people, this is the level that things could be at."]})}),Object(z.jsxs)("div",{className:"typography-line",children:[Object(z.jsx)("span",{children:"Quote"}),Object(z.jsx)("blockquote",{children:Object(z.jsxs)("p",{className:"blockquote blockquote-primary",children:['"I will be the leader of a company that ends up being worth billions of dollars, because I got the answers. I understand culture. I am the nucleus. I think that\u2019s a responsibility that I have, to push possibilities, to show people, this is the level that things could be at."'," ",Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("small",{children:"- Noaa"})]})})]}),Object(z.jsxs)("div",{className:"typography-line",children:[Object(z.jsx)("span",{children:"Muted Text"}),Object(z.jsx)("p",{className:"text-muted",children:"I will be the leader of a company that ends up being worth billions of dollars, because I got the answers..."})]}),Object(z.jsxs)("div",{className:"typography-line",children:[Object(z.jsx)("span",{children:"Primary Text"}),Object(z.jsx)("p",{className:"text-primary",children:"I will be the leader of a company that ends up being worth billions of dollars, because I got the answers..."})]}),Object(z.jsxs)("div",{className:"typography-line",children:[Object(z.jsx)("span",{children:"Info Text"}),Object(z.jsx)("p",{className:"text-info",children:"I will be the leader of a company that ends up being worth billions of dollars, because I got the answers..."})]}),Object(z.jsxs)("div",{className:"typography-line",children:[Object(z.jsx)("span",{children:"Success Text"}),Object(z.jsx)("p",{className:"text-success",children:"I will be the leader of a company that ends up being worth billions of dollars, because I got the answers..."})]}),Object(z.jsxs)("div",{className:"typography-line",children:[Object(z.jsx)("span",{children:"Warning Text"}),Object(z.jsx)("p",{className:"text-warning",children:"I will be the leader of a company that ends up being worth billions of dollars, because I got the answers..."})]}),Object(z.jsxs)("div",{className:"typography-line",children:[Object(z.jsx)("span",{children:"Danger Text"}),Object(z.jsx)("p",{className:"text-danger",children:"I will be the leader of a company that ends up being worth billions of dollars, because I got the answers..."})]}),Object(z.jsx)("div",{className:"typography-line",children:Object(z.jsxs)("h2",{children:[Object(z.jsx)("span",{children:"Small Tag"}),"Header with small subtitle ",Object(z.jsx)("br",{}),Object(z.jsx)("small",{children:'Use "small" tag for the headers'})]})})]})]})})})})})};a(254),a(248);var Me=a(41),De={all:"All Attendance",late:"Late Attendance",wrong:"Wrong Class Attendance",missed:"Missed Class"},Ye=[{path:"/students",name:"Students",icon:"nc-icon nc-chart-pie-35",component:ie,layout:"/admin",hidden:!0,additional:"/addclass"},{path:"/students",name:"Students",icon:"nc-icon nc-chart-pie-35",component:te,layout:"/admin",hidden:!0,additional:"/add"},{path:"/students",name:"Students",icon:"nc-icon nc-chart-pie-35",component:se,layout:"/admin",hidden:!0,additional:"/edit"},{path:"/students",name:"Students",icon:"nc-icon nc-chart-pie-35",component:J,layout:"/admin"},{path:"/staff",name:"Staff",icon:"nc-icon nc-circle-09",component:de,layout:"/admin",hidden:!0,additional:"/add"},{path:"/staff",name:"Staff",icon:"nc-icon nc-circle-09",component:he,layout:"/admin",hidden:!0,additional:"/edit"},{path:"/staff",name:"Staff",icon:"nc-icon nc-circle-09",component:ue,layout:"/admin",hidden:!0,additional:"/schedule"},{path:"/staff",name:"Staff",icon:"nc-icon nc-circle-09",component:oe,layout:"/admin"},{path:"/class",name:"Class",icon:"nc-icon nc-notes",component:Oe,layout:"/admin",hidden:!0,additional:"/add"},{path:"/class",name:"Class",icon:"nc-icon nc-notes",component:xe,layout:"/admin",hidden:!0,additional:"/edit"},{path:"/class",name:"Class",icon:"nc-icon nc-notes",component:_e,layout:"/admin",hidden:!0,additional:"/daily"},{path:"/class",name:"Class",icon:"nc-icon nc-notes",component:ke,layout:"/admin",hidden:!0,additional:"/calendar"},{path:"/class",name:"Class",icon:"nc-icon nc-notes",component:Ne,layout:"/admin",hidden:!0,additional:"/schedule"},{path:"/class",name:"Class",icon:"nc-icon nc-notes",component:fe,layout:"/admin"},{path:"/belt",name:"Belt Setup",icon:"nc-icon nc-paper-2",component:Se,hidden:!0,layout:"/admin"},{path:"/report",name:"Reports",icon:"nc-icon nc-atom",component:function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.handleClickView=function(){if(s.state.day_start.localeCompare(s.state.day_end)>0)s.setState({filtered:[]});else{var e={createdAt:{$gte:Z()(s.state.day_start).toISOString(),$lt:Z()(s.state.day_end).add(1,"days").toISOString()},token:s.state.token_info},t={};if("_all_"!==s.state.student){e.student=s.state.student;var a=s.state.students.find((function(e){return e._id===s.state.student}));t.gen_student_name=a.firstname+" "+a.lastname}else t.gen_student_name="";if("_all_"!==s.state.belt){var n=s.state.belts.find((function(e){return e._id===s.state.belt}));t.gen_belt=n.name,e.belt=s.state.belt}else t.gen_belt="";if("_all_"!==s.state.sel_class){var c=s.state.classes.find((function(e){return e._id===s.state.sel_class}));t.gen_class=c.name,e.class_id=s.state.sel_class}else t.gen_class="";t.gen_report_type="all","late"===s.state.report_type?(e.is_late=!0,t.gen_report_type="late"):"wrong"===s.state.report_type?(e.is_wrong=!0,t.gen_report_type="wrong"):"missed"===s.state.report_type&&(e.is_missed=!0,e.consecutive=s.state.consecutive,t.gen_report_type="missed",t.gen_consecutive=s.state.consecutive),t.gen_day_start=s.state.day_start,t.gen_day_end=s.state.day_end,s.setState(t),H(R.check_student_get,e).then((function(e){e.data.success?s.setState({filtered:e.data.result}):console.log(e.data.message)}))}},s.handleExport=function(){var e="Student Attendance Report\n"+De[s.state.gen_report_type]+" "+("missed"===s.state.gen_report_type?"".concat(s.state.gen_consecutive," consecutive "):"")+(s.state.gen_student_name?"Student: ".concat(s.state.gen_student_name," "):"")+(s.state.gen_belt?"Belt: ".concat(s.state.gen_belt," "):"")+(s.state.gen_class?"Class: ".concat(s.state.gen_class," "):"")+"(".concat(Z()(s.state.gen_day_start).format("MM/DD/YYYY")," - ").concat(Z()(s.state.gen_day_end).format("MM/DD/YYYY"),")"),t=["Student","Belt","Date","Class"];"missed"!==s.state.gen_report_type&&t.push("");var a={filename:"Student Attendance",fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!0,title:e,useTextFile:!1,useBom:!0,headers:t},n=new Me.ExportToCsv(a),c=s.state.filtered.map((function(e){var t={student:e.student.firstname+" "+e.student.lastname,belt:e.belt,date:Z()(e.createdAt).format("MM/DD/YYYY"),class:e.class_name};return"missed"!==s.state.gen_report_type&&(t.other=e.is_late&&e.is_wrong?"**Late Wrong class":e.is_late?"**Late":e.is_wrong?"**Wrong class":""),t}));n.generateCsv(c)},s.state={students:[],student:"_all_",belts:[],belt:"_all_",classes:[],sel_class:"_all_",report_type:"all",consecutive:1,filtered:[],logs:[],day_start:Z()().format("YYYY-MM-DD"),day_end:Z()().format("YYYY-MM-DD"),token_info:D("token_info"),gen_day_start:Z()().format("YYYY-MM-DD"),gen_day_end:Z()().format("YYYY-MM-DD"),gen_student_name:"",gen_belt:"",gen_class:"",gen_report_type:"all",gen_consecutive:1},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;Promise.all([H(R.student_getall,{token:this.state.token_info}),H(R.belt_getall,{token:this.state.token_info}),H(R.class_getall,{token:this.state.token_info})]).then((function(t){var a=Object(K.a)(t,3),s=a[0],n=a[1],c=a[2];if(s.data.success){var i=s.data.result;console.log(i),e.setState({students:i})}else console.log(s.data.message);n.data.success?e.setState({belts:n.data.result}):console.log(n.data.message),c.data.success?e.setState({classes:c.data.result}):console.log(c.data.message)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(O.a,{children:Object(z.jsx)(ee.a,{children:Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{xs:"12",sm:"6",md:"8",children:Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{xs:12,sm:6,children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"From"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.day_start,required:!0,onChange:function(t){return e.setState({day_start:t.target.value})}})})]})}),Object(z.jsx)(y.a,{xs:12,sm:6,children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"To"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.day_end,required:!0,onChange:function(t){return e.setState({day_end:t.target.value})}})})]})}),Object(z.jsx)(y.a,{xs:"12",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Student"}),Object(z.jsxs)($.a.Control,{as:"select",value:this.state.student,onChange:function(t){return e.setState({student:t.target.value})},children:[Object(z.jsx)("option",{value:"_all_",children:"All"}),this.state.students.map((function(e){return Object(z.jsxs)("option",{value:e._id,children:[e.firstname," ",e.lastname]},e._id)}))]})]})}),Object(z.jsx)(y.a,{xs:"12",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Class"}),Object(z.jsxs)($.a.Control,{as:"select",value:this.state.sel_class,onChange:function(t){return e.setState({sel_class:t.target.value})},children:[Object(z.jsx)("option",{value:"_all_",children:"All"}),this.state.classes.map((function(e){return Object(z.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]})}),Object(z.jsx)(y.a,{xs:"12",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Belt"}),Object(z.jsxs)($.a.Control,{as:"select",value:this.state.belt,onChange:function(t){return e.setState({belt:t.target.value})},children:[Object(z.jsx)("option",{value:"_all_",children:"All"}),this.state.belts.map((function(e){return Object(z.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]})})]})}),Object(z.jsxs)(y.a,{xs:"12",sm:"6",md:"4",children:[Object(z.jsxs)(v.a,{className:"mt-3",children:[Object(z.jsx)(y.a,{xs:"12",children:Object(z.jsx)($.a.Check,{type:"radio",label:"All Attendance",name:"report_type",checked:"all"===this.state.report_type,onChange:function(t){return e.setState({report_type:"all"})}})}),Object(z.jsx)(y.a,{xs:"12",children:Object(z.jsx)($.a.Check,{type:"radio",label:"Late to class",name:"report_type",checked:"late"===this.state.report_type,onChange:function(t){return e.setState({report_type:"late"})}})}),Object(z.jsx)(y.a,{xs:"12",children:Object(z.jsx)($.a.Check,{type:"radio",label:"Attending wrong class",name:"report_type",checked:"wrong"===this.state.report_type,onChange:function(t){return e.setState({report_type:"wrong"})}})}),Object(z.jsx)(y.a,{xs:"12",children:Object(z.jsx)($.a.Check,{type:"radio",label:"Missed a class",name:"report_type",checked:"missed"===this.state.report_type,onChange:function(t){return e.setState({report_type:"missed"})}})}),Object(z.jsx)(y.a,{xs:"12",style:{paddingLeft:40},children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)($.a.Label,{style:{textTransform:"capitalize"},children:"Consecutive classes missed"}),Object(z.jsx)($.a.Control,{disabled:"missed"!==this.state.report_type,min:"1",type:"number",value:this.state.consecutive,onChange:function(t){return e.setState({consecutive:t.target.value})}})]})})]}),Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{xs:"12",className:"d-flex align-items-end mt-4",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)(x.a,{className:"btn-fill mr-2",variant:"secondary",onClick:this.handleClickView,children:"View"}),Object(z.jsx)(x.a,{className:"btn-fill",variant:"info",onClick:this.handleExport,children:"Export"})]})})})]}),Object(z.jsx)(y.a,{xs:"12",children:Object(z.jsx)("div",{className:"separator mt-2 mb-4"})})]}),Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{children:[Object(z.jsxs)("p",{children:["Student Attendance Report",Object(z.jsx)("br",{}),De[this.state.gen_report_type]," ","missed"===this.state.gen_report_type?"".concat(this.state.gen_consecutive," consecutive "):"",this.state.gen_student_name?"Student: ".concat(this.state.gen_student_name," "):"",this.state.gen_belt?"Belt: ".concat(this.state.gen_belt," "):"",this.state.gen_class?"Class: ".concat(this.state.gen_class," "):"","(",Z()(this.state.gen_day_start).format("MM/DD/YYYY")," - ",Z()(this.state.gen_day_end).format("MM/DD/YYYY"),")"]}),Object(z.jsxs)(je.a,{bordered:!0,children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{children:"Student"}),Object(z.jsx)("th",{children:"Belt"}),Object(z.jsx)("th",{children:"Date"}),Object(z.jsx)("th",{children:"Class"}),"missed"!==this.state.gen_report_type?Object(z.jsx)("th",{}):null]})}),Object(z.jsx)("tbody",{children:this.state.filtered.map((function(t,a){return Object(z.jsxs)("tr",{children:[Object(z.jsxs)("td",{children:[t.student.firstname," ",t.student.lastname]}),Object(z.jsx)("td",{children:t.belt}),Object(z.jsx)("td",{children:Z()(t.createdAt).format("MM/DD/YYYY")}),Object(z.jsx)("td",{children:t.class_name}),"missed"!==e.state.gen_report_type?Object(z.jsx)("td",{children:t.is_late&&t.is_wrong?"**Late Wrong class":t.is_late?"**Late":t.is_wrong?"**Wrong class":""}):null]},"row_"+a)}))})]})]})})]})})})})}}]),a}(n.Component),hidden:!0,layout:"/admin",additional:"/student"},{path:"/report",name:"Reports",icon:"nc-icon nc-atom",component:function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.onStaffChanged=function(e){s.setState({staff:e}),s.fetchStaffData(e)},s.fetchStaffData=function(e){var t=e||s.state.staff;H(R.check_staff_get,{token:s.state.token_info,staff:t}).then((function(e){e.data.success?s.setState({logs:e.data.result}):s.showMessage(e.data.message)})).catch((function(e){console.log(e)}))},s.handleClickView=function(){if(s.state.day_start.localeCompare(s.state.day_end)>0)s.setState({filtered:[]});else{var e=Z()(s.state.day_start).toISOString(),t=Z()(s.state.day_end).add(1,"days").toISOString(),a=function(e,t){return e.localeCompare(t)},n=G(s.state.logs,"createdAt",e,a),c=G(s.state.logs,"createdAt",t,a),i=s.state.staffs.find((function(e){return e._id===s.state.staff})),r=0,l=s.state.logs.slice(n,c).map((function(e){var t=e.schedules.map((function(t){return{date:Z()(e.createdAt).format("MM/DD/YYYY"),day:Z()(e.createdAt).format("dddd"),interval:t.time_start+" - "+t.time_end,class_name:t.class_name,total:T(A(t.time_end)-A(t.time_start))}}));return e.additional&&e.additional.time_start.localeCompare(e.additional.time_end)<0&&t.push({date:Z()(e.createdAt).format("MM/DD/YYYY"),day:Z()(e.createdAt).format("dddd"),interval:e.additional.time_start+" - "+e.additional.time_end,class_name:"None",total:T(A(e.additional.time_end)-A(e.additional.time_start))}),r+=e.total_time,t}));l=l.flat().sort((function(e,t){return e.date.localeCompare(t.date)?e.date.localeCompare(t.date):e.interval.localeCompare(t.interval)})),s.setState({filtered:l,gen_day_start:s.state.day_start,gen_day_end:s.state.day_end,staff_name:null===i||void 0===i?void 0:i.name,gen_total:r})}},s.handleExport=function(){var e={filename:"Staff Attendance",fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!0,title:"Staff Attendance\n"+s.state.staff_name+" ("+Z()(s.state.day_start).format("MM/DD/YYYY")+" - "+Z()(s.state.day_end).format("MM/DD/YYYY")+")",useTextFile:!1,useBom:!0,headers:["Date","Day","In/Out","Class","Total"]},t=new Me.ExportToCsv(e),a=Object.assign([],s.state.filtered);a.push({date:"",day:"",interval:"",class_name:"Total",total:T(s.state.gen_total)}),t.generateCsv(a)},s.state={staffs:[],staff:"",logs:[],filtered:[],day_start:Z()().format("YYYY-MM-DD"),day_end:Z()().format("YYYY-MM-DD"),token_info:D("token_info"),staff_name:"",gen_day_start:Z()().format("YYYY-MM-DD"),gen_day_end:Z()().format("YYYY-MM-DD"),gen_total:""},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;H(R.staff_getall,{token:this.state.token_info}).then((function(t){if(t.data.success){var a,s,n,c=t.data.result;e.setState({staffs:c,staff:null===(a=c[0])||void 0===a?void 0:a._id,staff_name:null===(s=c[0])||void 0===s?void 0:s.name}),e.fetchStaffData(null===(n=c[0])||void 0===n?void 0:n._id)}else console.log(t.data.message)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(O.a,{children:Object(z.jsx)(ee.a,{children:Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsx)(ee.a.Title,{className:"mb-2",children:"Display Staff Attendance"}),Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{xs:12,sm:6,lg:3,children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"From"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.day_start,required:!0,onChange:function(t){return e.setState({day_start:t.target.value})}})})]})}),Object(z.jsx)(y.a,{xs:12,sm:6,lg:3,children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"To"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.day_end,required:!0,onChange:function(t){return e.setState({day_end:t.target.value})}})})]})}),Object(z.jsx)(y.a,{xs:"12",sm:"6",lg:"3",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Staff"}),Object(z.jsx)($.a.Control,{as:"select",value:this.state.staff,onChange:function(t){return e.onStaffChanged(t.target.value)},children:this.state.staffs.map((function(e){return Object(z.jsx)("option",{value:e._id,children:e.name},e._id)}))})]})}),Object(z.jsx)(y.a,{xs:12,sm:"6",lg:"3",className:"d-flex align-items-end",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)(x.a,{className:"btn-fill mr-2",variant:"secondary",onClick:this.handleClickView,children:"View"}),Object(z.jsx)(x.a,{className:"btn-fill",variant:"info",onClick:this.handleExport,children:"Export"})]})}),Object(z.jsx)(y.a,{children:Object(z.jsx)("div",{className:"separator mt-2 mb-4"})})]}),Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{children:[Object(z.jsxs)("p",{children:["Staff Attendance Report ",Object(z.jsx)("br",{}),this.state.staff_name," (",Z()(this.state.gen_day_start).format("MM/DD/YYYY")," - ",Z()(this.state.gen_day_end).format("MM/DD/YYYY"),")"]}),Object(z.jsxs)(je.a,{bordered:!0,children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{children:"Date"}),Object(z.jsx)("th",{children:"Day"}),Object(z.jsx)("th",{children:"In/Out"}),Object(z.jsx)("th",{children:"Class"}),Object(z.jsx)("th",{children:"Total"})]})}),Object(z.jsxs)("tbody",{children:[this.state.filtered.map((function(e,t){return Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:e.date}),Object(z.jsx)("td",{children:e.day}),Object(z.jsx)("td",{children:e.interval}),Object(z.jsx)("td",{children:e.class_name}),Object(z.jsx)("td",{children:e.total})]},"row_"+t)})),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{}),Object(z.jsx)("td",{}),Object(z.jsx)("td",{}),Object(z.jsx)("td",{children:"Total"}),Object(z.jsx)("td",{children:T(this.state.gen_total)})]})]})]})]})})]})})})})}}]),a}(n.Component),hidden:!0,layout:"/admin",additional:"/staff"},{path:"/report",name:"Reports",icon:"nc-icon nc-atom",component:function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.handleClickView=function(){if(s.state.day_start.localeCompare(s.state.day_end)>0)s.setState({filtered:[]});else{var e=Z()(s.state.day_start).toISOString(),t=Z()(s.state.day_end).add(1,"days").toISOString(),a=function(e,t){return Z()(e).month()!==Z()(t).month()?Z()(e).month()-Z()(t).month():Z()(e).date()-Z()(t).date()},n=function(e,t){var a=Object.assign({},e);return a.birthday=Z()(e.birthday).set("year",t),a},c=G(s.state.students,"birthday",e,a),i=G(s.state.students,"birthday",t,a),r=Z()(s.state.day_start).year();if(Z()(s.state.day_start).year()===Z()(s.state.day_end).year())s.setState({filtered:s.state.students.slice(c,i).map((function(e){return n(e,r)}))});else{for(var l=s.state.students.slice(c).map((function(e){return n(e,r)})),o=Z()(s.state.day_end).year(),d=function(e){var t=s.state.students.map((function(t){return n(t,e)}));l=l.concat(t)},h=r+1;h<o;h++)d(h);l=l.concat(s.state.students.slice(0,i).map((function(e){return n(e,o)}))),s.setState({filtered:l})}}},s.handleExport=function(){var e={filename:"Birthday Report",fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!0,title:"Student Birthday Report ("+Z()(s.state.day_start).format("MM/DD/YYYY")+" - "+Z()(s.state.day_end).format("MM/DD/YYYY")+")",useTextFile:!1,useBom:!0,headers:["Name","Birthday","Class"]};new Me.ExportToCsv(e).generateCsv(s.state.filtered.map((function(e){return{name:e.firstname+" "+e.lastname,birthday:Z()(e.birthday).format("MM/DD/YYYY"),class_names:e.class_names}})))},s.state={students:[],filtered:[],day_start:Z()().format("YYYY-MM-DD"),day_end:Z()().format("YYYY-MM-DD"),token_info:D("token_info")},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;H(R.student_getall,{token:this.state.token_info}).then((function(t){if(t.data.success){var a=t.data.result;e.setState({students:a.sort((function(e,t){var a=Z()(e.birthday),s=Z()(t.birthday);return a.month()!==s.month()?a.month()-s.month():a.date()-s.date()}))})}else console.log(t.data.message)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(O.a,{children:Object(z.jsx)(ee.a,{children:Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{xs:12,sm:4,md:3,children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"From"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.day_start,required:!0,onChange:function(t){return e.setState({day_start:t.target.value})}})})]})}),Object(z.jsx)(y.a,{xs:12,sm:4,md:3,children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"To"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.day_end,required:!0,onChange:function(t){return e.setState({day_end:t.target.value})}})})]})}),Object(z.jsx)(y.a,{xs:12,sm:"4",md:"6",className:"d-flex align-items-end",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)(x.a,{className:"btn-fill mr-2",variant:"secondary",onClick:this.handleClickView,children:"View"}),Object(z.jsx)(x.a,{className:"btn-fill",variant:"info",onClick:this.handleExport,children:"Export"})]})}),Object(z.jsx)(y.a,{children:Object(z.jsx)("div",{className:"separator mt-2 mb-4"})})]}),Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{children:[Object(z.jsxs)("p",{children:["Student Birthday Report (",Z()(this.state.day_start).format("MM/DD/YYYY")," - ",Z()(this.state.day_end).format("MM/DD/YYYY"),")"]}),Object(z.jsxs)(je.a,{bordered:!0,children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{children:"Name"}),Object(z.jsx)("th",{children:"Birthday"}),Object(z.jsx)("th",{children:"Class"})]})}),Object(z.jsx)("tbody",{children:this.state.filtered.map((function(e,t){return Object(z.jsxs)("tr",{children:[Object(z.jsxs)("td",{children:[e.firstname," ",e.lastname]}),Object(z.jsx)("td",{children:Z()(e.birthday).format("MM/DD/YYYY")}),Object(z.jsx)("td",{children:e.class_names})]},"row_"+t)}))})]})]})})]})})})})}}]),a}(n.Component),hidden:!0,layout:"/admin",additional:"/birthday"},{path:"/report",name:"Reports",icon:"nc-icon nc-atom",component:function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.handleClickView=function(){if(s.state.day_start.localeCompare(s.state.day_end)>0)s.setState({filtered:[]});else{var e=Z()(s.state.day_start).toISOString(),t=Z()(s.state.day_end).add(1,"days").toISOString(),a=function(e,t){return e.localeCompare(t)},n=G(s.state.students,"date_end",e,a),c=G(s.state.students,"date_end",t,a);Z()(s.state.day_start).year();s.setState({filtered:s.state.students.slice(n,c)})}},s.handleExport=function(){var e={filename:"Contract Report",fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!0,title:"Contract Report ("+Z()(s.state.day_start).format("MM/DD/YYYY")+" - "+Z()(s.state.day_end).format("MM/DD/YYYY")+")",useTextFile:!1,useBom:!0,headers:["Name","Belt","Expires"]};new Me.ExportToCsv(e).generateCsv(s.state.filtered.map((function(e){return{name:e.firstname+" "+e.lastname,belts:e.belts,date_end:Z()(e.date_end).format("MM/DD/YYYY")}})))},s.state={students:[],filtered:[],day_start:Z()().format("YYYY-MM-DD"),day_end:Z()().format("YYYY-MM-DD"),token_info:D("token_info")},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;H(R.student_getall,{token:this.state.token_info}).then((function(t){if(t.data.success){var a=t.data.result;e.setState({students:a.sort((function(e,t){return e.date_end.localeCompare(t.date_end)}))})}else console.log(t.data.message)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(O.a,{children:Object(z.jsx)(ee.a,{children:Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{xs:12,sm:4,md:3,children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"From"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.day_start,required:!0,onChange:function(t){return e.setState({day_start:t.target.value})}})})]})}),Object(z.jsx)(y.a,{xs:12,sm:4,md:3,children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"To"}),Object(z.jsx)("div",{className:"full-width",children:Object(z.jsx)($.a.Control,{type:"date",value:this.state.day_end,required:!0,onChange:function(t){return e.setState({day_end:t.target.value})}})})]})}),Object(z.jsx)(y.a,{xs:12,sm:"4",md:"6",className:"d-flex align-items-end",children:Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)(x.a,{className:"btn-fill mr-2",variant:"secondary",onClick:this.handleClickView,children:"View"}),Object(z.jsx)(x.a,{className:"btn-fill",variant:"info",onClick:this.handleExport,children:"Export"})]})}),Object(z.jsx)(y.a,{children:Object(z.jsx)("div",{className:"separator mt-2 mb-4"})})]}),Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{children:[Object(z.jsxs)("p",{children:["Contract Report (",Z()(this.state.day_start).format("MM/DD/YYYY")," - ",Z()(this.state.day_end).format("MM/DD/YYYY"),")"]}),Object(z.jsxs)(je.a,{bordered:!0,children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{children:"Name"}),Object(z.jsx)("th",{children:"Belt"}),Object(z.jsx)("th",{children:"Expires"})]})}),Object(z.jsx)("tbody",{children:this.state.filtered.map((function(e,t){return Object(z.jsxs)("tr",{children:[Object(z.jsxs)("td",{children:[e.firstname," ",e.lastname]}),Object(z.jsx)("td",{children:e.belts}),Object(z.jsx)("td",{children:Z()(e.date_end).format("MM/DD/YYYY")})]},"row_"+t)}))})]})]})})]})})})})}}]),a}(n.Component),hidden:!0,layout:"/admin",additional:"/contract"}];var Ie=function(e){var t=e.setLoggedIn,a=Object(o.g)(),s=function(){for(var e=0;e<Ye.length;e++){var t=Ye[e].layout+Ye[e].path;if(t+=Ye[e].additional||"",-1!=a.pathname.indexOf(t))return{main:Ye[e].name,path_main:Ye[e].layout+Ye[e].path,additional:Ye[e].additional?Ye[e].additional.substr(1):void 0,path_add:t}}return{main:"Brand",path_main:"/"}}();return Object(z.jsx)(f.a,{bg:"light",expand:"lg",sticky:!0,children:Object(z.jsxs)(O.a,{fluid:!0,children:[Object(z.jsxs)("div",{className:"d-flex justify-content-center align-items-center ml-2 ml-lg-0",children:[Object(z.jsx)(x.a,{variant:"dark",className:"d-lg-none btn-fill d-flex justify-content-center align-items-center rounded-circle p-2",onClick:function(e){e.preventDefault(),document.documentElement.classList.toggle("nav-open");var t=document.createElement("div");t.id="bodyClick",t.onclick=function(){this.parentElement.removeChild(this),document.documentElement.classList.toggle("nav-open")},document.body.appendChild(t)},children:Object(z.jsx)("i",{className:"fas fa-ellipsis-v"})}),Object(z.jsxs)(p.a,{children:[Object(z.jsx)(p.a.Item,{href:s.path_main,active:!s.additional,children:s.main}),s.additional&&s.additional.length>0?Object(z.jsx)(p.a.Item,{href:s.path_add,active:!0,children:s.additional}):null]})]}),Object(z.jsxs)(f.a.Toggle,{"aria-controls":"basic-navbar-nav",className:"mr-2",children:[Object(z.jsx)("span",{className:"navbar-toggler-bar burger-lines"}),Object(z.jsx)("span",{className:"navbar-toggler-bar burger-lines"}),Object(z.jsx)("span",{className:"navbar-toggler-bar burger-lines"})]}),Object(z.jsxs)(f.a.Collapse,{id:"basic-navbar-nav",children:[Object(z.jsx)(_.a,{className:"nav mr-auto",navbar:!0}),Object(z.jsxs)(_.a,{className:"ml-auto",navbar:!0,children:[Object(z.jsxs)(g.a,{as:_.a.Item,children:[Object(z.jsx)(g.a.Toggle,{"aria-expanded":!1,"aria-haspopup":!0,as:_.a.Link,"data-toggle":"dropdown",id:"navbarDropdownMenuLink",variant:"default",className:"m-0",children:Object(z.jsx)("span",{className:"no-icon",children:"Reports"})}),Object(z.jsxs)(g.a.Menu,{"aria-labelledby":"navbarDropdownMenuLink",children:[Object(z.jsx)(g.a.Item,{href:"/admin/report/student",children:"Student Attendance"}),Object(z.jsx)(g.a.Item,{href:"/admin/report/staff",children:"Staff Attendance"}),Object(z.jsx)(g.a.Item,{href:"/admin/report/birthday",children:"Birthday"}),Object(z.jsx)(g.a.Item,{href:"/admin/report/contract",children:"Contract Expiration"})]})]}),Object(z.jsx)(_.a.Item,{children:Object(z.jsx)(_.a.Link,{className:"m-0",href:"#pablo",onClick:function(e){e.preventDefault();var a=D("token_info");H(R.logout,{token:a}).then((function(e){e.data.success||console.log(e),Y("token_info","",-1e3),t(!1),window.location.href="/admin/login"})).catch((function(e){console.log(e),Y("token_info","",-1e3),t(!1),window.location.href="//admin/login"}))},children:Object(z.jsx)("span",{className:"no-icon",children:"Log out"})})})]})]})]})})};var Be=function(e){var t=e.color,s=e.image,n=e.routes,c=Object(o.g)();return Object(z.jsxs)("div",{className:"sidebar","data-image":s,"data-color":t,children:[Object(z.jsx)("div",{className:"sidebar-background",style:{backgroundImage:"url("+s+")"}}),Object(z.jsxs)("div",{className:"sidebar-wrapper",children:[Object(z.jsxs)("div",{className:"logo d-flex align-items-center justify-content-start",children:[Object(z.jsx)("div",{className:"logo-img",children:Object(z.jsx)("img",{src:a(237).default,alt:"..."})}),Object(z.jsx)("a",{className:"simple-text ml-2",href:"/",children:"Martial Arts"})]}),Object(z.jsx)(_.a,{children:n.map((function(e,t){return e.redirect||e.hidden?null:Object(z.jsx)("li",{className:e.upgrade?"active active-pro":(a=e.layout+e.path,c.pathname.indexOf(a)>-1?"active":""),children:Object(z.jsxs)(l.b,{to:e.layout+e.path,className:"nav-link",activeClassName:"active",children:[Object(z.jsx)("i",{className:e.icon}),Object(z.jsx)("p",{children:e.name})]})},t);var a}))})]})]})},Ae=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.state={signing:!0,email_sign:"",password_sign:"",name:"",password:"",confirm_password:""},s.signIn=s.signIn.bind(Object(Q.a)(s)),s.register=s.register.bind(Object(Q.a)(s)),s}return Object(h.a)(a,[{key:"signIn",value:function(e){var t=this;document.getElementById("form").checkValidity()&&(e.preventDefault(),H(R.login,{name:this.state.name,password:this.state.password}).then((function(e){var a=e.data;a.success?(Y("token_info",a.token,4e7),t.props.setLoggedIn&&t.props.setLoggedIn(!0),t.props.history.replace("/admin/students")):t.showMessage(a.message)})).catch((function(e){console.log(e),t.showMessage(e.message)})))}},{key:"register",value:function(){var e=this;H(R.register,{name:this.state.name,password:this.state.password,confirm_password:this.state.confirm_password}).then((function(t){var a=t.data;a.success?(Y("token_info",a.token,4e7),e.props.history.replace("/admin/students")):e.showMessage(a.message)})).catch((function(t){console.log(t),e.showMessage(t.message)}))}},{key:"render",value:function(){var e=this;return Object(z.jsxs)("div",{className:"vertical-centering-container",children:[Object(z.jsx)(b.a,{}),Object(z.jsxs)("div",{style:{marginTop:"10%"},className:"vertical-centering-container",children:[Object(z.jsx)("img",{src:"/logo.gif",className:"App-logo",alt:"logo"}),Object(z.jsx)(ee.a,{style:{width:320},className:"mt-4",children:Object(z.jsxs)(ee.a.Body,{children:[Object(z.jsx)(ee.a.Title,{style:{textAlign:"center"},children:"Martial Arts Admin"}),Object(z.jsxs)($.a,{id:"form",children:[Object(z.jsxs)($.a.Group,{className:"mt-4",children:[Object(z.jsx)("label",{children:"Admin Name"}),Object(z.jsx)($.a.Control,{placeholder:"Name",type:"text",required:!0,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Admin Password"}),Object(z.jsx)($.a.Control,{placeholder:"Password",type:"password",required:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})]}),Object(z.jsx)(x.a,{onClick:this.signIn,className:"float-right btn-fill",variant:"primary",type:"submit",children:"Sign In"})]})]})})]})]})}}]),a}(n.Component),Te=Object(o.h)(Ae),Fe=a.p+"static/media/sidebar-5.109ea1af.jpg",Ge=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var c;return Object(d.a)(this,a),(c=t.call(this,e)).getRoutes=function(e){return e.map((function(e,t){if("/admin"===e.layout){var a=e.layout+e.path;return e.additional&&(a+=e.additional),Object(z.jsx)(o.b,{path:a,exact:!e.additional,render:function(t){return Object(z.jsx)(e.component,Object(s.a)({},t))}},t)}return null}))},c.setLoggedIn=function(e){c.setState({logged_in:e})},c.state={logged_in:!!D("token_info"),image:Fe,color:"black",hasImage:!0},c.mainPanel=Object(n.createRef)(),c}return Object(h.a)(a,[{key:"componentDidMount",value:function(){if(this.state.logged_in&&(document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.mainPanel.current.scrollTop=0,window.innerWidth<993&&-1!==document.documentElement.className.indexOf("nav-open"))){document.documentElement.classList.toggle("nav-open");var e=document.getElementById("bodyClick");e.parentNode.removeChild(e)}}},{key:"render",value:function(){var e=this,t=window.location.pathname,a=this.state.logged_in;return a||"/admin/login"===t?Object(z.jsxs)("div",{className:"wrapper",children:[Object(z.jsx)(b.a,{}),a?Object(z.jsx)(Be,{color:this.state.color,image:this.state.hasImage?this.state.image:"",routes:Ye}):null,Object(z.jsxs)(o.d,{children:[Object(z.jsx)(o.b,{path:"/admin/login",render:function(t){return Object(z.jsx)(Te,Object(s.a)(Object(s.a)({},t),{},{setLoggedIn:e.setLoggedIn}))}}),Object(z.jsxs)("div",{className:"main-panel",ref:this.mainPanel,children:[a?Object(z.jsx)(Ie,{setLoggedIn:this.setLoggedIn}):null,Object(z.jsx)("div",{className:"content",children:this.getRoutes(Ye)})]})]})]}):Object(z.jsx)(o.a,{to:"/admin/login"})}}]),a}(n.Component);var Le=function(){return Object(z.jsx)(f.a,{bg:"dark",expand:"lg",variant:"dark",children:Object(z.jsxs)(f.a.Brand,{href:"/",className:"d-flex",children:[Object(z.jsx)("img",{src:"/logo.png",alt:""}),Object(z.jsxs)("div",{children:[Object(z.jsx)("strong",{children:"BH Martial Arts"}),Object(z.jsx)("p",{style:{fontSize:12,marginBottom:0},children:"Attendance Tracking"})]})]})})},Ee=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).showMessage=function(e){m.store.addNotification({title:"Error",message:e,type:"danger",insert:"top",container:"top-center",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})},s.onChangeLocation=function(e){s.setState({location:e.target.value}),localStorage.setItem("location",e.target.value),s.fetchSchedules(e.target.value)},s.fetchSchedules=function(e){var t=e||s.state.location;t?E.a.post(R.schedule_gettoday,{loc_id:t}).then((function(e){e.data.success&&s.setState({schedules:e.data.result})})).catch((function(e){console.log(e)})):console.log("location cannot be null")},s.state={current_time:Z()().format("HH : mm : ss"),location:localStorage.getItem("location")||"",locations:[],schedules:[]},s.timerInterval=null,s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this;this.timerInterval=setInterval((function(){t.setState({current_time:Z()().format("HH : mm : ss")})}),1e3),E.a.post(R.location_getall).then((function(t){if(t.data.success){var a={locations:t.data.result};!e.state.location&&t.data.result.length?(a.location=t.data.result[0]._id,localStorage.setItem("location",a.location),e.fetchSchedules(a.location)):e.fetchSchedules(),e.setState(a)}})).catch((function(e){console.log(e)}))}},{key:"componentWillUnmount",value:function(){this.timerInterval&&clearInterval(this.timerInterval)}},{key:"render",value:function(){var e=Z()().format("HH:mm");return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(Le,{}),Object(z.jsx)(b.a,{}),Object(z.jsx)("div",{className:"content-wrapper",children:Object(z.jsxs)(O.a,{className:"mt-4",children:[Object(z.jsxs)(v.a,{children:[Object(z.jsxs)(y.a,{xs:12,sm:8,children:[Object(z.jsxs)("div",{className:"py-2 d-flex justify-content-around",children:["Today is ",Object(z.jsx)("span",{style:{fontWeight:500},children:Z()().format("dddd, MM/DD/YYYY")})]}),Object(z.jsxs)("div",{className:"my-4 d-flex align-items-center justify-content-around",children:["Current Time: ",Object(z.jsx)("span",{style:{backgroundColor:"#19A463",color:"white",fontSize:24,padding:"2px 12px"},children:this.state.current_time})]})]}),Object(z.jsxs)(y.a,{xs:12,sm:4,children:[Object(z.jsx)($.a.Control,{as:"select",value:this.state.location,className:"mb-3",onChange:this.onChangeLocation,children:this.state.locations.map((function(e){return Object(z.jsx)("option",{value:e._id,children:e.name},e._id)}))}),Object(z.jsx)(l.b,{to:"/select/student",className:"w-100 btn btn-outline-secondary",children:"Touch here for Student Check In"}),Object(z.jsx)(l.b,{to:"/select/staff",className:"my-3 ml-auto w-100 btn btn-outline-secondary",children:"Touch here for Staff Check In"})]})]}),Object(z.jsxs)(v.a,{children:[Object(z.jsx)("div",{className:"text-center w-100 mt-4",style:{fontWeight:"bold"},children:"Schedule for check in"}),Object(z.jsx)(y.a,{children:Object(z.jsx)("table",{className:"w-100 mt-4",children:Object(z.jsx)("tbody",{children:this.state.schedules.map((function(t){return Object(z.jsxs)("tr",{className:e.localeCompare(t.time_end)>0?"d-none":"",children:[Object(z.jsx)("td",{children:Object(z.jsx)("strong",{children:t.class_name})}),Object(z.jsxs)("td",{children:[t.time_start,"-",t.time_end]}),Object(z.jsx)("td",{className:"text-italic",children:e.localeCompare(t.time_start)>=0?"In progress":"Coming up"})]},t._id)}))})})})]})]})})]})}}]),a}(n.Component),Pe=Object(o.h)(Ee),Re=Object(o.h)((function(e){var t=e.history,a=Object(n.useState)([]),s=Object(K.a)(a,2),c=s[0],i=s[1];Object(n.useEffect)((function(){r()}),[]);var r=function(){var e=localStorage.getItem("location");H(R.staff_getall,{loc_id:e,for:"front"}).then((function(e){if(e.data.success){var t=e.data.result;i(t)}}),(function(e){console.log(e)}))};return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(Le,{}),Object(z.jsx)(b.a,{}),Object(z.jsx)("div",{className:"content-wrapper",children:Object(z.jsxs)(O.a,{className:"mt-3",children:[Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{className:"d-flex align-items-center mb-4",children:[Object(z.jsx)("h5",{children:"Staff Checkin"}),Object(z.jsx)(x.a,{variant:"outline-secondary",className:"ml-auto",onClick:function(){t.goBack()},children:"Start Over"})]})}),Object(z.jsx)(v.a,{children:c.map((function(e){return Object(z.jsx)(y.a,{xs:12,sm:6,md:4,children:Object(z.jsx)(l.b,{to:"/check/staff?id="+e._id,children:Object(z.jsx)("strong",{children:e.name})})},e._id)}))})]})})]})})),He=Object(o.h)((function(e){var t=e.history,a=Object(n.useState)("A"),s=Object(K.a)(a,2),c=s[0],i=s[1],r=Object(n.useState)([]),o=Object(K.a)(r,2),d=o[0],h=o[1],j=Object(n.useState)([]),u=Object(K.a)(j,2),m=u[0],f=u[1];Object(n.useEffect)((function(){g()}),[]);var _=function(e){e!==c&&(i(e),f(d.filter((function(t){return t.firstname[0].toUpperCase()===e}))))},g=function(){var e=localStorage.getItem("location");H(R.student_getall,{loc_id:e,for:"front",is_active:!0}).then((function(e){if(e.data.success){var t=e.data.result;h(t),f(t.filter((function(e){return e.firstname[0].toUpperCase()===c})))}}),(function(e){console.log(e)}))};return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(Le,{}),Object(z.jsx)(b.a,{}),Object(z.jsx)("div",{className:"content-wrapper",children:Object(z.jsxs)(O.a,{className:"mt-3",children:[Object(z.jsx)(v.a,{children:Object(z.jsxs)(y.a,{className:"d-flex align-items-center mb-4",children:[Object(z.jsx)("h5",{children:"What letter does your first name begin with?"}),Object(z.jsx)(x.a,{variant:"outline-secondary",className:"ml-auto",onClick:function(){t.goBack()},children:"Start Over"})]})}),Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{className:"d-md-none",children:Object(z.jsx)($.a.Control,{as:"select",value:c,className:"mb-3 w-100",onChange:function(e){return _(e.target.value)},children:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map((function(e){return Object(z.jsx)("option",{value:e,children:e},e)}))})}),Object(z.jsx)(y.a,{className:"d-none d-md-block",children:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map((function(e){return Object(z.jsx)(x.a,{variant:"outline-secondary",className:"mx-2 mb-3 px-0",style:{width:44,height:44},active:e===c,onClick:function(){return _(e)},children:e},e)}))})]}),Object(z.jsx)(v.a,{children:Object(z.jsx)(y.a,{children:Object(z.jsx)("table",{className:"w-100",children:Object(z.jsx)("tbody",{children:m.map((function(e){return Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)(l.b,{to:"/check/student?id="+e._id,children:Object(z.jsxs)("strong",{children:[e.firstname," ",e.lastname]})})}),Object(z.jsx)("td",{children:e.belts})]},e._id)}))})})})})]})})]})})),Ve=a(77),ze=Object(o.h)((function(e){var t=e.history,a=Object(n.useState)({}),s=Object(K.a)(a,2),c=s[0],i=s[1],r=Object(n.useState)([]),l=Object(K.a)(r,2),o=l[0],d=l[1],h=Object(n.useState)([]),j=Object(K.a)(h,2),u=j[0],f=j[1],_=Object(n.useState)("00:00"),g=Object(K.a)(_,2),p=g[0],C=g[1],k=Object(n.useState)("00:00"),w=Object(K.a)(k,2),N=w[0],S=w[1],M=Object(n.useState)(!1),D=Object(K.a)(M,2),Y=D[0],I=D[1];Object(n.useEffect)((function(){var e=localStorage.getItem("location"),t="",a=new URLSearchParams(window.location.search);a.has("id")&&(t=a.get("id")),Promise.all([H(R.staff_get,{loc_id:e,for:"front",_id:t}),H(R.schedule_gettoday,{loc_id:e})]).then((function(e){var t=Object(K.a)(e,2),a=t[0],s=t[1];a.data.success&&i(a.data.result),s.data.success&&d(s.data.result)})).catch((function(e){console.log(e)}))}),[]);var B=function(e,t,a){m.store.addNotification({title:void 0===t?"Error":t,message:e,type:a||"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})};return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(Le,{}),Object(z.jsx)(b.a,{}),Object(z.jsx)(O.a,{className:"mt-4",children:Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{xs:12,children:Object(z.jsxs)("h5",{children:["Hello ",Object(z.jsx)("strong",{children:c.name}),"! Select the class you will be instructing or enter start/stop times then click CHECK IN."]})}),Object(z.jsxs)(y.a,{xs:12,sm:6,md:7,children:[o.map((function(e){return Object(z.jsxs)("div",{children:[Object(z.jsx)("input",{type:"checkbox",className:"mr-2",onChange:function(t){return function(e,t){var a=Object.assign([],u);t&&-1===a.indexOf(e)?a.push(e):t||-1===a.indexOf(e)||a.splice(a.indexOf(e),1),f(a)}(e._id,t.target.checked)}}),Object(z.jsxs)("label",{children:[e.class_name," (",e.time_start," - ",e.time_end,")"]})]},e._id)})),0===o.length?"No schedule today":null]}),Object(z.jsxs)(y.a,{xs:12,sm:6,md:5,children:[Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Start"}),Object(z.jsx)($.a.Control,{type:"time",step:"60",value:p,onChange:function(e){return C(e.target.value)}})]}),Object(z.jsxs)($.a.Group,{children:[Object(z.jsx)("label",{children:"Stop"}),Object(z.jsx)($.a.Control,{type:"time",step:"60",value:N,onChange:function(e){return S(e.target.value)}})]}),Object(z.jsx)(x.a,{variant:"outline-secondary",disabled:Y,onClick:function(){var e=A(N)-A(p);if(e<0)B("Invalid additional time interval.");else{I(!0);var a,s=[],n=Object(Ve.a)(o);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(-1!==u.indexOf(i._id))s.push({_id:i._id,class_name:i.class_name,time_start:i.time_start,time_end:i.time_end}),e+=A(i.time_end)-A(i.time_start)}}catch(r){n.e(r)}finally{n.f()}H(R.check_staff_add,{staff:c._id,schedules:s,additional:{time_start:p,time_end:N},total_time:e}).then((function(e){I(!1),e.data.success?(B("Success","","success"),setTimeout((function(){t.replace("/")}),1e3)):B(e.data.message)}),(function(e){console.log(e),I(!1),B("Failed to check.")}))}},children:"Check in"}),Object(z.jsx)(x.a,{variant:"outline-secondary",className:"ml-2",onClick:function(){return t.replace("/")},children:"Start Over"})]})]})})]})})),qe=Object(o.h)((function(e){var t=e.history,a=Object(n.useState)({}),s=Object(K.a)(a,2),c=s[0],i=s[1],r=Object(n.useState)(null),l=Object(K.a)(r,2),o=l[0],d=l[1],h=Object(n.useState)(!1),j=Object(K.a)(h,2),u=j[0],f=j[1];Object(n.useEffect)((function(){var e=localStorage.getItem("location"),t=new URLSearchParams(window.location.search),a="";t.has("id")&&(a=t.get("id")),Promise.all([H(R.student_get,{loc_id:e,_id:a,for:"front"}),H(R.schedule_gettoday,{loc_id:e})]).then((function(e){var t=Object(K.a)(e,2),a=t[0],s=t[1],n=[];if(a.data.success){var c,r=a.data.result,l={_id:r._id,firstname:r.firstname,lastname:r.lastname,birthday:Z()(r.birthday).format("YYYY-MM-DD"),is_active:r.is_active,image_url:R.base_url+r.avatar,is_trial:r.is_trial,levels:r.levels,attendance:r.attendance||[]},o=Object(Ve.a)(l.attendance);try{for(o.s();!(c=o.n()).done;){var h=c.value;n=n.concat(h.schedules)}}catch(b){o.e(b)}finally{o.f()}i(l)}else _(a.data.message);if(s.data.success){var j=Z()().format("HH:mm"),u=s.data.result,m=(u=u.filter((function(e){return j.localeCompare(e.time_end)<0}))).filter((function(e){return-1!==n.indexOf(e._id)}));m.length?(d(m[0]),f(!1)):u.length&&(d(u[0]),f(!0))}})).catch((function(e){console.log(e)}))}),[]);var _=function(e,t,a){m.store.addNotification({title:void 0===t?"Error":t,message:e,type:a||"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:3e3}})};return console.log("09:45".localeCompare("10:00"),Z()().format("HH:mm")),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(Le,{}),Object(z.jsx)(b.a,{}),Object(z.jsx)(O.a,{className:"mt-4",children:Object(z.jsxs)(v.a,{children:[Object(z.jsx)(y.a,{xs:12,sm:4,children:Object(z.jsx)("img",{src:c.image_url,className:"w-100 mb-4"})}),Object(z.jsxs)(y.a,{xs:12,sm:8,md:4,children:[Object(z.jsxs)("h5",{children:[Object(z.jsxs)("strong",{children:[c.firstname," ",c.lastname]})," is checking in for class:"]}),Object(z.jsx)("span",{children:o?o.class_name:"No upcoming class today."}),Object(z.jsxs)("div",{children:[Object(z.jsx)("span",{style:{color:"#ff2333",fontSize:14,fontStyle:"italic"},className:o&&o.time_start.localeCompare(Z()().format("HH:mm"))<=0?"mr-2":"d-none",children:Object(z.jsx)("strong",{children:"Late"})}),Object(z.jsx)("span",{style:{color:"#FED800",fontSize:14,fontStyle:"italic"},className:u?"":"d-none",children:Object(z.jsx)("strong",{children:"Wrong"})})]}),Object(z.jsx)(x.a,{variant:"outline-secondary",className:"w-100 mt-2",disabled:!o,onClick:function(){H(R.check_student_add,{student:c._id,class_id:o.class_id,class_name:o.class_name,schedule_id:o._id,is_wrong:u}).then((function(e){e.data.success?(_("Success","","success"),setTimeout((function(){t.replace("/")}),1e3)):_(e.data.message)}),(function(e){console.log(e),_("Failed to check.")}))},children:"Check in"}),Object(z.jsx)(x.a,{variant:"outline-secondary",className:"w-100 mt-2",onClick:function(){return t.replace("/")},children:"Start Over"})]})]})})]})})),We=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,257)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),s(e),n(e),c(e),i(e)}))};r.a.render(Object(z.jsx)(l.a,{children:Object(z.jsxs)(o.d,{children:[Object(z.jsx)(o.b,{path:"/admin",render:function(e){return Object(z.jsx)(Ge,Object(s.a)({},e))}}),Object(z.jsx)(o.b,{exact:!0,path:"/",component:Pe}),Object(z.jsx)(o.b,{path:"/select/staff",component:Re}),Object(z.jsx)(o.b,{path:"/select/student",component:He}),Object(z.jsx)(o.b,{path:"/check/staff",component:ze}),Object(z.jsx)(o.b,{path:"/check/student",component:qe})]})}),document.getElementById("root")),We()}},[[238,1,2]]]);
//# sourceMappingURL=main.5e572777.chunk.js.map